<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mingjie's Blog</title>
    <description>Write everything, think everything.</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Thu, 08 Mar 2018 20:27:18 +0900</pubDate>
    <lastBuildDate>Thu, 08 Mar 2018 20:27:18 +0900</lastBuildDate>
    <generator>Jekyll v3.4.3</generator>
    
      <item>
        <title>OASP笔记 - 9</title>
        <description>&lt;p&gt;乍看起来人为地制造一个恒星或者光球层的模型似乎没有必要。难道就不能从观测到的恒星光谱中导出我们想要的参数吗？就像从视差算出距离一样，只不过现在的公式或者方法比倒数麻烦很多而已。不过抱歉还真的不能，因为影响恒星光谱的因素实在太多，所以这样做一般是不现实的。所以要知道我们想知道的信息，我们只能倒过来，从一些理论和物理规律去造出一个模型，然后将模型产生的光谱和实际的光谱对比并不断修正，直到它们非常相像，我们才认为这个模型至少反映了一些实际，并用模型的参数去反映恒星的参数。&lt;/p&gt;

&lt;p&gt;我们在第七章看到计算光强或者流量的时候我们需要源函数，同时在第八章看到计算&lt;script type=&quot;math/tex&quot;&gt;\kappa&lt;/script&gt;的时候还需要压强（气体的和电子的）；所以光球层模型至少需要包括不同光深下面的源函数和压强（三列很多行的一个表），当然需要的话还可以在后面加上其他的参数。作为例子，这里给出一个Kurucz的模型（MOOG格式）：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;KURUCZ&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;TEFF   4750.  GRAVITY 2.50000 LTE[0.0] VTURB=2  L/H=1.25 NOVER&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ntau=       72&lt;/code&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;script type=&quot;math/tex&quot;&gt;\rho x&lt;/script&gt;&lt;/th&gt;
      &lt;th&gt;&lt;script type=&quot;math/tex&quot;&gt;T&lt;/script&gt;&lt;/th&gt;
      &lt;th&gt;&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}&lt;/script&gt;&lt;/th&gt;
      &lt;th&gt;&lt;script type=&quot;math/tex&quot;&gt;N_\mathrm{e}&lt;/script&gt;&lt;/th&gt;
      &lt;th&gt;&lt;script type=&quot;math/tex&quot;&gt;\kappa_\mathrm{ross}&lt;/script&gt;&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;2.48844185E-03&lt;/td&gt;
      &lt;td&gt;2877.3&lt;/td&gt;
      &lt;td&gt;7.869E-01&lt;/td&gt;
      &lt;td&gt;3.746E+07&lt;/td&gt;
      &lt;td&gt;5.359E-05&lt;/td&gt;
      &lt;td&gt;9.873E-03&lt;/td&gt;
      &lt;td&gt;2.000E+05&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3.29274059E-03&lt;/td&gt;
      &lt;td&gt;2900.6&lt;/td&gt;
      &lt;td&gt;1.041E+00&lt;/td&gt;
      &lt;td&gt;4.908E+07&lt;/td&gt;
      &lt;td&gt;5.701E-05&lt;/td&gt;
      &lt;td&gt;1.014E-02&lt;/td&gt;
      &lt;td&gt;2.000E+05&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4.29948870E-03&lt;/td&gt;
      &lt;td&gt;2923.9&lt;/td&gt;
      &lt;td&gt;1.360E+00&lt;/td&gt;
      &lt;td&gt;6.364E+07&lt;/td&gt;
      &lt;td&gt;6.082E-05&lt;/td&gt;
      &lt;td&gt;1.011E-02&lt;/td&gt;
      &lt;td&gt;2.000E+05&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;第一行是指名模型类型（MOOG也接受其他的一些模型），第二行是注释（有效温度和logg），第三行指名接下来的72行都是模型的内容。计算光谱的时候用到的物理量是光深、温度、气体压强、电子数密度或者是压强、Rossland不透明度。这里没有用到源函数的原因应该是认为热动平衡下每层的源函数都是普朗克函数，所以有温度就可以算出源函数了。所以有了模型之后就可以根据&lt;script type=&quot;math/tex&quot;&gt;(7.15)&lt;/script&gt;来算流量了。&lt;/p&gt;

&lt;p&gt;这本书的主旨是“读完某一章之后就可以拿这一章的内容来做计算”，所以这里提到的模型肯定有很多假设，距离真实情况有一定距离。但是这不代表着它们没有用，它们仍然是不错的工具和真实模型的起点。这里的假设和简化包括：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;平面平行层假设，所有物理量只和深度有关&lt;/li&gt;
  &lt;li&gt;处于流体静力学平衡，没有很大的膨胀和收缩，没有质量损失&lt;/li&gt;
  &lt;li&gt;忽略米粒组织和和黑子，或者把它们也包括在光球层的平均物理量里面&lt;/li&gt;
  &lt;li&gt;忽略磁场的影响&lt;/li&gt;
  &lt;li&gt;处于热动平衡，有&lt;script type=&quot;math/tex&quot;&gt;(1.18), (1.19)&lt;/script&gt;以及源函数为普朗克函数&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;很明显想要改进模型的话放宽这些条件就行了。十七、十八章会放宽最后一个条件。热动平衡并不是全局的，只是在某一个（相对光球层）比较小的&lt;script type=&quot;math/tex&quot;&gt;dx&lt;/script&gt;里面成立，所以我们将光球层分成很多个子层，每一层有一个温度对应（上面的模型表格）；这就叫局部热动平衡(LTE)。&lt;/p&gt;

&lt;h3 id=&quot;流体静力学平衡&quot;&gt;流体静力学平衡&lt;/h3&gt;

&lt;p&gt;流体静力学平衡就意味着压强差等于体元的所受的重力：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;dP = dF/dA = \rho g dx&lt;/script&gt;

&lt;p&gt;这里的&lt;script type=&quot;math/tex&quot;&gt;dF,dx&lt;/script&gt;都是里面减外面；而我们用&lt;script type=&quot;math/tex&quot;&gt;dx&lt;/script&gt;定义的光深刚好也是这个方向的，所以：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dP}{d\tau_\nu} = \frac{g}{\kappa_\nu} \tag{9.1}&lt;/script&gt;

&lt;p&gt;这里的压强是总的压强。一般来说这里面气体压强占大头，除了一些特殊情况：高温恒星的辐射压&lt;script type=&quot;math/tex&quot;&gt;(5.11)&lt;/script&gt;、磁场的压强或者湍流的压强。所以我们又欢乐地将总压强替换成气体压强&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}&lt;/script&gt;了。&lt;/p&gt;

&lt;p&gt;对&lt;script type=&quot;math/tex&quot;&gt;(9.1)&lt;/script&gt;两边都乘一个&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}^{1/2}&lt;/script&gt;，然后为了方便起见将某波长上的光深&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;换成参考波长5000Å上的光深&lt;script type=&quot;math/tex&quot;&gt;\kappa_0&lt;/script&gt;，得：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g}^{1/2} dP_\mathrm{g} = P_\mathrm{g}^{1/2}\frac{g}{\kappa_0} d\tau_0&lt;/script&gt;

&lt;p&gt;要多说两句的是以后下标带&lt;script type=&quot;math/tex&quot;&gt;0&lt;/script&gt;的量都指的是在参考波长上的量；在后面会看到&lt;script type=&quot;math/tex&quot;&gt;\tau_0&lt;/script&gt;可以转换成其他波长上的光深，并且因为不同波长上的同一个光深值一般代表着不同的几何深度，在比较不同波长上的量的时候转换到同一个光深尺度下面是有必要的。&lt;/p&gt;

&lt;p&gt;将上式两边积分，得：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} P_\mathrm{g}(\tau_0) &amp;= ( \frac{3}{2} g \int_0^{\tau_0} \frac{P_\mathrm{g}^{1/2}}{\kappa_0} dt_0 )^{2/3} \\ &amp;= ( \frac{3}{2} g \int_{-\infty}^{\log{\tau_0}} \frac{t_0^{1/2}P_\mathrm{g}^{1/2}}{\kappa_0 \log{e}} d\log{t_0} )^{2/3} \end{align} \tag{9.2} %]]&gt;&lt;/script&gt;

&lt;p&gt;换成&lt;script type=&quot;math/tex&quot;&gt;\log{}&lt;/script&gt;是因为这样能有更高的精度。这是个超越方程所以我们先猜一个&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}(\tau_0)&lt;/script&gt;，代进去算出新的&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}(\tau_0)&lt;/script&gt;之后再重复直到收敛。即使我们猜了&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}(\tau_0)&lt;/script&gt;，上面的式子里仍有吸收系数&lt;script type=&quot;math/tex&quot;&gt;\kappa_0&lt;/script&gt;是未知的，所以我们先要知道&lt;script type=&quot;math/tex&quot;&gt;\kappa_0&lt;/script&gt;。这就是第八章干的活，而从那里的结论我们知道&lt;script type=&quot;math/tex&quot;&gt;\kappa_0&lt;/script&gt;是温度和电子压强的函数，然后我们就要去求&lt;script type=&quot;math/tex&quot;&gt;T(\tau_0), P_\mathrm{e}(\tau_0)&lt;/script&gt;了。&lt;/p&gt;

&lt;h3 id=&quot;恒星光球层的温度&quot;&gt;恒星光球层的温度&lt;/h3&gt;

&lt;h5 id=&quot;太阳&quot;&gt;太阳&lt;/h5&gt;

&lt;p&gt;我们有两个方法获取恒星光球层的温度：临边昏暗以及吸收系数在不同波长上的变化。&lt;/p&gt;

&lt;p&gt;很明显临边昏暗只能用在太阳身上。&lt;script type=&quot;math/tex&quot;&gt;(7.10)&lt;/script&gt;给出：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu(0) = \int_{0}^\infty S_\nu e^{-t_\nu\sec{\theta}}\sec{\theta} dt_\nu \tag{9.3}&lt;/script&gt;

&lt;p&gt;也就是说太阳表面的辐射强度是受&lt;script type=&quot;math/tex&quot;&gt;e^{-t_\nu\sec{\theta}}&lt;/script&gt;调节的。辐射强度主要的贡献来自于&lt;script type=&quot;math/tex&quot;&gt;S_\nu\sec{\theta} \sim \frac{1}{e} S_\nu\sec{\theta}&lt;/script&gt;的这个范围内，而随着我们的视线方向逐渐远离太阳中心，达到&lt;script type=&quot;math/tex&quot;&gt;\frac{1}{e} S_\nu\sec{\theta}&lt;/script&gt;所需的光深越来越小，也就是我们能看到的表面越来越浅。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/Limb_darkening.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;太阳的临边昏暗&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;在灰大气模型下，&lt;script type=&quot;math/tex&quot;&gt;(7.34)&lt;/script&gt;可以写成：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;S_\nu = a + b\tau_\nu&lt;/script&gt;

&lt;p&gt;代进&lt;script type=&quot;math/tex&quot;&gt;(9.3)&lt;/script&gt;里面可以得到：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu(0) = a + b \cos{theta}&lt;/script&gt;

&lt;p&gt;也就是说在&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;角观测到的辐射强度就是在光深&lt;script type=&quot;math/tex&quot;&gt;\tau_\nu&lt;/script&gt;处的源函数的值，所以只要观测辐射强度我们就知道了源函数；这叫做Eddington-Barbier关系。当然更复杂一点的源函数也可以通过数值模拟来找到。&lt;/p&gt;

&lt;p&gt;一个稍微定量一点的方法是将&lt;script type=&quot;math/tex&quot;&gt;(9.3)&lt;/script&gt;写成对数坐标下的形式：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu(0) = \int_{-\infty}^\infty S_\nu e^{-t_\nu\sec{\theta}}t_\nu\sec{\theta} \frac{d\log{t_\nu}}{\log{e}} \tag{9.4}&lt;/script&gt;

&lt;p&gt;右边的积分叫做贡献函数，它反映了每层的辐射对表面光强的贡献。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.3.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;不同角度位置上的贡献函数&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;如上图，右边为大气底部，左边为大气顶端（对于光深来讲）。我们可以看到没有光从很顶端以及底部的区域发射出来，同时越靠近恒星边缘我们主要看见的光就越从光深更小的地方发射。这里的源函数取得非常随意，只是保证了普朗克函数的形式(&lt;script type=&quot;math/tex&quot;&gt;\frac{1}{e^{0.001/\tau}-1}&lt;/script&gt;)，所以&lt;script type=&quot;math/tex&quot;&gt;dI_\nu&lt;/script&gt;的值和书上的有较大差异。同样实际操作中我们也是把顺序倒过来，通过观测到的&lt;script type=&quot;math/tex&quot;&gt;I_\nu&lt;/script&gt;计算出源函数。&lt;/p&gt;

&lt;p&gt;第二个办法是在不同波段上观测。除了角度之外，吸收系数&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;也会决定我们能看得多深，所以对于中低温恒星来说在16000Å左右我们能看得最深，；往短波方向走我们看得越来越浅因为负氢离子的吸收变大（第八章的gif图）；波长小于2500Å之后虽然负氢离子的吸收变小了但是金属的吸收变大了。当然能结合临边昏暗以及不同波长能给我们带来最多的信息。其他还有的办法是观测强的谱线，将在第十三章详述。&lt;/p&gt;

&lt;p&gt;所以对于太阳来说，结果大致是这样的：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wwwuser.oats.inaf.it/castelli/sun.html&quot;&gt;Kurucz模型&lt;/a&gt;
&lt;a href=&quot;http://marcs.astro.uu.se/index.php&quot;&gt;MARCS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;基本上在&lt;script type=&quot;math/tex&quot;&gt;% &lt;![CDATA[
-3 &lt; \log{\tau_0} &lt; 1 %]]&gt;&lt;/script&gt;的范围内所有模型都一致，因为有观测数据支撑；更深的地方模型们开始有分歧，因为处理对流的方式不一样。而在光深很小的地方的分歧部分原因是LTE不再成立。&lt;/p&gt;

&lt;p&gt;另一个必须要提及的点是实际上同一层内温度肯定不会处处相同；温度起伏在百分之几到25%左右，这也是模型没有顾及的。&lt;/p&gt;

&lt;h5 id=&quot;其他恒星&quot;&gt;其他恒星&lt;/h5&gt;

&lt;p&gt;显然我们不能用临边昏暗去得到其他恒星的温度（边看都看不见还昏什么暗）。所以我们一是完全从理论计算，或者直接将太阳的模型变换到别的恒星上。&lt;/p&gt;

&lt;p&gt;理论计算来源于&lt;script type=&quot;math/tex&quot;&gt;(7.14)&lt;/script&gt;。当然还要加上&lt;script type=&quot;math/tex&quot;&gt;(7.22), (7.28), (7.30)&lt;/script&gt;和流量守恒（恒星大气不发光）。先猜一个源函数，代进&lt;script type=&quot;math/tex&quot;&gt;(7.14)&lt;/script&gt;算出流量，再根据流量守恒去修改源函数直到收敛。具体例子可以看P179中间提到的论文。有的时候我们还要加上谱线的影响，称之为line blanketing。&lt;/p&gt;

&lt;p&gt;理论计算主要的误差来源与不准确的&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;以及对对流的处理（混合长的选择什么的）。对流并不会对表面流量产生很大的影响，但是会改变底层的温度。我们会在第十七章引入对流。&lt;/p&gt;

&lt;p&gt;恒星大气的理论模型十分复杂，所以多数的研究都会把模型算好并发布，直接拿来用就行了。&lt;/p&gt;

&lt;p&gt;将太阳的模型变换到别的恒星上虽然看起来比较粗暴但是还是有一些理由的。它的做法是用一个常数去乘太阳的温度，得到恒星的温度：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;T(\tau_0) = S_0 T_\odot(\tau_0)&lt;/script&gt;

&lt;p&gt;灰大气模型下面这么做是完全没有问题的，因为&lt;script type=&quot;math/tex&quot;&gt;(7.36)&lt;/script&gt;：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;T(\tau) = [\frac{3}{4}(\tau+\frac{2}{3})]^{1/4} T_\mathrm{eff}&lt;/script&gt;

&lt;p&gt;可得&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;T(\tau) = \frac{T_\mathrm{eff}}{T_\mathrm{eff}^\odot}T_\odot(\tau)&lt;/script&gt;

&lt;p&gt;这两种方法的结果是差不多的&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当然巨星和矮星会有不同，可能需要一个标准巨星。&lt;/p&gt;

&lt;p&gt;实际操作中也可以直接拿格点中的恒星模型来稍作变换然后得到想要的模型，因为常数&lt;script type=&quot;math/tex&quot;&gt;S_0&lt;/script&gt;可以随便取。&lt;/p&gt;

&lt;p&gt;到此我们就认为我们已经知道恒星大气每层的温度了。下一个要知道的是气体压强。&lt;/p&gt;

&lt;h3 id=&quot;气体压强-电子压强-温度关系&quot;&gt;气体压强-电子压强-温度关系&lt;/h3&gt;

&lt;p&gt;当我们在解&lt;script type=&quot;math/tex&quot;&gt;(9.2)&lt;/script&gt;的时候我们先猜一个气体压强&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}&lt;/script&gt;。之后我们就需要算&lt;script type=&quot;math/tex&quot;&gt;\kappa_0&lt;/script&gt;，所以我们马上就要求出电子压强&lt;script type=&quot;math/tex&quot;&gt;p_\mathrm{e}&lt;/script&gt;和气体压强的关系。令单位体积内某种元素&lt;script type=&quot;math/tex&quot;&gt;j&lt;/script&gt;的一次电离离子的数量为&lt;script type=&quot;math/tex&quot;&gt;N_{1j}&lt;/script&gt;，原子数量为&lt;script type=&quot;math/tex&quot;&gt;N_{0j}&lt;/script&gt;，则根据&lt;script type=&quot;math/tex&quot;&gt;(1.20)&lt;/script&gt;有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{N_{1j}}{N_{0j}} = \frac{\Phi_j(T)}{P_\mathrm{e}}&lt;/script&gt;

&lt;p&gt;忽略二次及以上的电离，&lt;script type=&quot;math/tex&quot;&gt;N_{1j}&lt;/script&gt;就和&lt;script type=&quot;math/tex&quot;&gt;j&lt;/script&gt;元素贡献的电子的数量&lt;script type=&quot;math/tex&quot;&gt;N_{ej}&lt;/script&gt;相同，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\Phi_j(T)}{P_\mathrm{e}} = \frac{N_{ej}}{N_{0j}} = \frac{N_{ej}}{N_{j} - N_{ej}}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Rightarrow N_{\mathrm{e}j} = N_j \frac{\Phi_j(T)/P_\mathrm{e}}{1 + \Phi_j(T)/P_\mathrm{e}}&lt;/script&gt;

&lt;p&gt;由理想气体公式，压强为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{\mathrm{e}} = \sum_j N_{\mathrm{e}j}kT&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g} = \sum_j (N_{\mathrm{e}j} + N_{j})kT&lt;/script&gt;

&lt;p&gt;所以压强之比为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \frac{P_\mathrm{e}}{P_\mathrm{g}} &amp;= \frac{\sum_j N_{\mathrm{e}j}kT}{\sum_j (N_{\mathrm{e}j} + N_{j})kT} \\ &amp;= \frac{\sum_j N_j [\frac{\Phi_j(T)/P_\mathrm{e}}{1 + \Phi_j(T)/P_\mathrm{e}}]}{\sum_j N_j [1 +  \frac{\Phi_j(T)/P_\mathrm{e}}{1 + \Phi_j(T)/P_\mathrm{e}}]} \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;上下同除以单位体积内氢原子数量&lt;script type=&quot;math/tex&quot;&gt;N_\mathrm{H}&lt;/script&gt;，令&lt;script type=&quot;math/tex&quot;&gt;A_j = N_\mathrm{j}/N_\mathrm{H}&lt;/script&gt;为相对丰度，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e} = P_\mathrm{g} \frac{\sum_j A_j [\frac{\Phi_j(T)/P_\mathrm{e}}{1 + \Phi_j(T)/P_\mathrm{e}}]}{\sum_j A_j [1 +  \frac{\Phi_j(T)/P_\mathrm{e}}{1 + \Phi_j(T)/P_\mathrm{e}}]}&lt;/script&gt;

&lt;p&gt;这是一个超越方程，同样也需要迭代对于每一个光深的值去解。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.7.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如上图，我们能看出高温时&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g} \approx 2P_\mathrm{e}&lt;/script&gt;（因为氢基本上电离了），低温时&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e} \approx P_\mathrm{g}^{1/2}&lt;/script&gt;。低温这个结论也可以从公式中推出来。先认为恒星大气中只由一种元素的原子组成，则&lt;script type=&quot;math/tex&quot;&gt;(9.8)&lt;/script&gt;变为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e} = P_\mathrm{g} \frac{\Phi(T)/P_\mathrm{e}}{1 + 2\Phi(T)/P_\mathrm{e}}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Rightarrow P_\mathrm{e}^2 = \Phi(T)(P_\mathrm{g} - 2P_\mathrm{e})&lt;/script&gt;

&lt;p&gt;低温时&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e} \ll P_\mathrm{g}&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e}^2 \approx \Phi(T)P_\mathrm{g} \tag{9.9}&lt;/script&gt;

&lt;p&gt;低温恒星在迭代的时候还要注意元素丰度的问题，因为这个时候金属元素提供了主要的电子，迭代的时候可能也需要修改元素丰度。&lt;/p&gt;

&lt;h3 id=&quot;模型小结&quot;&gt;模型小结&lt;/h3&gt;

&lt;p&gt;我们已经可以计算大气模型了。拿已经有了的&lt;script type=&quot;math/tex&quot;&gt;T(\tau_0)&lt;/script&gt;和猜测的&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}(\tau_0)&lt;/script&gt;计算&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e}(\tau_0)&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;\kappa_0(\tau_0)&lt;/script&gt;，然后通过&lt;script type=&quot;math/tex&quot;&gt;(9.2)&lt;/script&gt;算出一个新的&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}(\tau_0)&lt;/script&gt;，如此重复。如果&lt;script type=&quot;math/tex&quot;&gt;T(\tau_0)&lt;/script&gt;是从太阳的转换来的话那收敛之后就完了；但如果&lt;script type=&quot;math/tex&quot;&gt;T(\tau_0)&lt;/script&gt;是理论值的话我们还要求它满足流量守恒，修正&lt;script type=&quot;math/tex&quot;&gt;T(\tau_0)&lt;/script&gt;然后再重复。&lt;/p&gt;

&lt;h3 id=&quot;从模型中导出来的东西&quot;&gt;从模型中导出来的东西&lt;/h3&gt;

&lt;h5 id=&quot;几何深度&quot;&gt;几何深度&lt;/h5&gt;

&lt;p&gt;几何深度就是&lt;script type=&quot;math/tex&quot;&gt;dx = d\tau_0 / \kappa_0 \rho&lt;/script&gt;啦，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;x(\tau_0) = \int_0^{\tau_0} \frac{1}{\kappa(t_0)\rho(t_0)} dt_0 \tag{9.10}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;\kappa&lt;/script&gt;已经在刚刚的迭代中确定了，&lt;script type=&quot;math/tex&quot;&gt;\rho&lt;/script&gt;可以算出来：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\rho = N_\mathrm{H} \times \sum A_j \mu_j&lt;/script&gt;

&lt;p&gt;同时&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;N_\mathrm{H} = \frac{N - N_\mathrm{e}}{\sum A_j} = \frac{P_\mathrm{g} - P_\mathrm{e}}{kT\sum A_j}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Rightarrow x(\tau_0) = \int_0^{\log{\tau_0}} \frac{kT(t_0)\sum A_jt_0}{\kappa(t_0) \sum A_j\mu_j[P_\mathrm{g} - P_\mathrm{e}]\log{e}} d\log{t_0} \tag{9.11}&lt;/script&gt;

&lt;p&gt;或者利用本文第一条公式&lt;script type=&quot;math/tex&quot;&gt;dP_\mathrm{g} = \rho g dx&lt;/script&gt;积分，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;x(P_\mathrm{g}) = \frac{1}{g} \int_0^{P_\mathrm{g}} \frac{kT(p)\sum A_j}{\sum A_j\mu_j} \frac{dp}{p-P_\mathrm{e}} \tag{9.12}&lt;/script&gt;

&lt;p&gt;从这里我们可以看到恒星大气的几何深度和&lt;script type=&quot;math/tex&quot;&gt;g&lt;/script&gt;是成反比的。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;模型的计算&quot;&gt;模型的计算&lt;/h5&gt;

&lt;p&gt;模型最重要的结果自然是光谱，或者说是不同波长上的流量。这个东西可以从&lt;script type=&quot;math/tex&quot;&gt;(7.15)&lt;/script&gt;计算出来：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu = 2\pi \int_{-\infty}^{\infty} S_\nu(\tau_0) E_2(\tau_\nu) \frac{\kappa_\nu(\tau_0)\tau_0 d\log{\tau_0}}{\kappa_0(\tau_0)\log{e}} \tag{9.13}&lt;/script&gt;

&lt;p&gt;这条式子和&lt;script type=&quot;math/tex&quot;&gt;(7.15)&lt;/script&gt;的区别在于&lt;script type=&quot;math/tex&quot;&gt;S_\nu&lt;/script&gt;以及&lt;script type=&quot;math/tex&quot;&gt;d \tau_\nu&lt;/script&gt;。&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;S_\nu&lt;/script&gt;的自变量被改成了&lt;script type=&quot;math/tex&quot;&gt;\tau_\nu&lt;/script&gt;，这是因为热动平衡下&lt;script type=&quot;math/tex&quot;&gt;S_\nu(\tau_\nu) = B_\nu[T(\tau_\nu)]&lt;/script&gt;，当我们在讨论同一个几何深度的薄层时无论用的自变量是&lt;script type=&quot;math/tex&quot;&gt;\tau_\nu&lt;/script&gt;还是&lt;script type=&quot;math/tex&quot;&gt;\tau_0&lt;/script&gt;，所表达的温度都是一样的（因为是同一层），所以方便起见我们用&lt;script type=&quot;math/tex&quot;&gt;\tau_0&lt;/script&gt;。要注意的是&lt;script type=&quot;math/tex&quot;&gt;E_2&lt;/script&gt;不能这样做，因为&lt;script type=&quot;math/tex&quot;&gt;E_2&lt;/script&gt;是一个积分，整个积分是随着&lt;script type=&quot;math/tex&quot;&gt;\tau_\nu&lt;/script&gt;的变化而变化的。&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;d \tau_\nu&lt;/script&gt;的话根据几何深度的定义，我们有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;dx = \frac{d\tau_\nu}{\kappa_\nu \rho} = \frac{d\tau_0}{\kappa_0 \rho}&lt;/script&gt;

&lt;p&gt;代进去再换成log scale，就有了最后的那坨东西。&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;(9.13)&lt;/script&gt;式的微分是恒星某一层在某个波长上发出的光的流量多少，我们将他称为flux contribution function。它说明了在这个波长下，恒星的光主要是从哪一层发出来的。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.9.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;从上图我们可以看出8000埃处的恒星光主要来自更高的位置，说明了&lt;script type=&quot;math/tex&quot;&gt;\kappa_{8000}&lt;/script&gt;更大。&lt;/p&gt;

&lt;p&gt;另一个明显的例子是巴尔末跳跃前后的flux contribution function。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.10.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;可以看到3646的辐射层远高于3648，说明多数的3646辐射都被氢原子吸收掉了。&lt;/p&gt;

&lt;p&gt;以上讨论的主要是&lt;script type=&quot;math/tex&quot;&gt;E_2&lt;/script&gt;对FCF的影响，同时源函数（其实也就是温度分度分布）对FCF也有影响。温度越高，辐射越多，辐射峰值也稍微往高处走（因为温度会使吸收系数发生变化）。&lt;/p&gt;

&lt;p&gt;最后，我们还有别的方法去计算流量，比如对&lt;script type=&quot;math/tex&quot;&gt;(7.15)&lt;/script&gt;的另一种积分：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu = \pi S_\nu(0) + 2\pi \int_0^\infty \frac{dS}{d\tau_\nu}E_3(\tau_\nu)d \tau_\nu&lt;/script&gt;

&lt;p&gt;它和边界的流量以及源函数的梯度有关。&lt;/p&gt;

&lt;h5 id=&quot;模型的性质压强关系&quot;&gt;模型的性质：压强关系&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.12.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图9.12显示了气体压强和温度的关系&lt;script type=&quot;math/tex&quot;&gt;T(P_g)&lt;/script&gt;。可以看到不同温度下的曲线并不像&lt;script type=&quot;math/tex&quot;&gt;T(\tau_0)&lt;/script&gt;一样可以直接乘上一个常数；这是我们用光深而不用气体压强做自变量的一个原因（不方便）。&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;(7.39)&lt;/script&gt;表明了当上图的斜率超过&lt;script type=&quot;math/tex&quot;&gt;1-1/\gamma \approx 0.4&lt;/script&gt;的时候，会发生对流。所以很多模型到了这里附近会不稳定，需要加入对流的因素。一件好事是对流一般发生在恒星大气的底部，因为大气比较稀薄的时候主要还是辐射传能。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.13.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/img/in-post/post-OASP9/9.14.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图9.13和9.14显示了两个不同温度的模型在不同光深处的气体以及电子压强。在低温模型的大气上层，电子压强远远小于气体压强；向恒星内部走，温度升高使得电离增强，所以电子压强也升高，但是仍然没有完全电离。对于高温恒星，两条线距离很小，意味着基本上完全电离了。&lt;/p&gt;

&lt;p&gt;我们还可以看看表面重力加速度和压强的关系。由&lt;script type=&quot;math/tex&quot;&gt;(9.2)&lt;/script&gt;，我们有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g} \approx C(T) g^{2/3} \tag{9.19}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;C(T)&lt;/script&gt;就是那一堆积分加常数。然后从&lt;script type=&quot;math/tex&quot;&gt;(9.9)&lt;/script&gt;，对于低温模型，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e} \approx \text{constant}\, g^{1/3} \tag{9.20}&lt;/script&gt;

&lt;p&gt;高温模型下因为&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e} \approx 0.5 P_\mathrm{g}&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e} \approx \text{constant}\, g^{2/3} \tag{9.21}&lt;/script&gt;

&lt;p&gt;这个结论是和计算一致的。&lt;/p&gt;

&lt;h5 id=&quot;金属丰度的影响&quot;&gt;金属丰度的影响&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.15.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/img/in-post/post-OASP9/9.16.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图9.15和9.16显示了低温模型不同金属丰度下气体压强的情况。高温模型的话主要是氢原子提供电子，同时压强也和金属丰度关系不大了。对于低温恒星，金属丰度越大、电子压强也越大。这是显而易见的，因为更多的金属提供了更多的电子。当然在大气底层，增大金属丰度对电子压强影响不大，因为此时（又）主要是由氢原子提供电子了，也不在乎金属提供的那点电子。稍微不那么好理解的是气体压强，为什么金属丰度增大之后气体压强反而减小了呢？这不是因为气体压强本身的问题，而是电子增多带来的不透明度增大。电子增多会带来更大的连续谱吸收，导致同一个几何深度上的光深变大，所以我们看到的恒星大气厚度变小，整条线右移、气体压强自然就“减小”了。&lt;/p&gt;

&lt;p&gt;当然这可以用公式推出来；我们计算这么一个量：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{P_\mathrm{e}}{P_\mathrm{g}}\frac{1}{\sum A_j} = \frac{P_\mathrm{e}}{P_\mathrm{g}} \frac{N_\mathrm{H}}{\sum N_J} \frac{kT}{kT} = \frac{P_\mathrm{e}}{P_\mathrm{g}} \frac{P_\mathrm{H}}{\sum N_j kT} \approx \frac{P_\mathrm{e}}{\sum N_j kT}&lt;/script&gt;

&lt;p&gt;恒星里面主要是氢嘛，所以&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{H}&lt;/script&gt;就近似相等了。继续，&lt;script type=&quot;math/tex&quot;&gt;N_j&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e}&lt;/script&gt;可以表述为原子离子的组合：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum N_j = \sum (N_1+N_0)_j, P_\mathrm{e} = N_\mathrm{e}kT = \sum N_{1j}kT&lt;/script&gt;

&lt;p&gt;所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{P_\mathrm{e}}{P_\mathrm{g}}\frac{1}{\sum A_j} \approx \frac{\sum N_{1j}}{\sum (N_1+N_0)_j}&lt;/script&gt;

&lt;p&gt;那么当金属基本上被电离的时候，&lt;script type=&quot;math/tex&quot;&gt;\sum N_{1j} \gg \sum N_{0j}&lt;/script&gt;：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{P_\mathrm{e}}{P_\mathrm{g}}\frac{1}{\sum A_j} \approx 1 \tag{9.22}&lt;/script&gt;

&lt;p&gt;金属处于中性的时候，&lt;script type=&quot;math/tex&quot;&gt;\sum N_{1j} \ll \sum (N_{1j} + N_{0j})&lt;/script&gt;：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{P_\mathrm{e}}{P_\mathrm{g}}\frac{1}{\sum A_j} \approx \frac{\sum N_{1j}}{\sum N_{0j}} \tag{9.23}&lt;/script&gt;

&lt;p&gt;在金属电离的情况下，&lt;script type=&quot;math/tex&quot;&gt;(9.1)&lt;/script&gt;可以写成：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;d P_\mathrm{g} = \frac{g}{\kappa_0}d\tau_0 = \frac{g}{P_\mathrm{e}\kappa_0/P_\mathrm{e}}d\tau_0 = \frac{g}{P_\mathrm{g}\sum A_j \kappa_0/P_\mathrm{e}}d\tau_0&lt;/script&gt;

&lt;p&gt;对&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g}&lt;/script&gt;积分，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{1}{2} P_\mathrm{g}^2 = \frac{1}{\sum A_j} \int_0^{\tau_0} \frac{g}{\kappa_0 / P_\mathrm{e}} d\tau_0&lt;/script&gt;

&lt;p&gt;把后面的积分当作常数，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g} = c_0 (\sum A_j)^{-1/2} \tag{9.24}&lt;/script&gt;

&lt;p&gt;然后从&lt;script type=&quot;math/tex&quot;&gt;(9.22)&lt;/script&gt;有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e} = c_0 (\sum A_j)^{1/2} \tag{9.25}&lt;/script&gt;

&lt;p&gt;当然这只是一个定性的估算，而且只在大气外部成立。&lt;/p&gt;

&lt;p&gt;在金属中性的情况下，只考虑一种金属使得&lt;script type=&quot;math/tex&quot;&gt;N_1/N_0 = \Phi(T)/P_\mathrm{e}&lt;/script&gt;，则有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g} = c_1 (\sum A_j)^{-1/3}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{e} = c_1 (\sum A_j)^{1/3}&lt;/script&gt;

&lt;p&gt;我们还可以比较一下图9.13和9.16，可以发现在恒星大气顶部，增大金属丰度和增大&lt;script type=&quot;math/tex&quot;&gt;\log{g}&lt;/script&gt;对电子压强的影响是类似的，所以这两个物理量同向变化的时候对大气顶端的光谱特征的影响也是类似的。也就是说从光谱特征的变化我们分不出究竟是金属丰度还是&lt;script type=&quot;math/tex&quot;&gt;\log{g}&lt;/script&gt;变大/变小了。&lt;/p&gt;

&lt;p&gt;氦元素丰度也可以稍微使得压强发生变化。利用&lt;script type=&quot;math/tex&quot;&gt;(8.19)&lt;/script&gt;我们可以将&lt;script type=&quot;math/tex&quot;&gt;(9.1)&lt;/script&gt;写成&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;dP_\mathrm{g} = \frac{g}{\kappa_0}d\tau_0 = \frac{g}{\kappa}\sum A_j \mu_j d\tau_0&lt;/script&gt;

&lt;p&gt;从这里我们能看到&lt;script type=&quot;math/tex&quot;&gt;\sum A_j \mu_j&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;g&lt;/script&gt;的地位是相似的，所以根据&lt;script type=&quot;math/tex&quot;&gt;(9.19)&lt;/script&gt;有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g} = \text{constant} (\sum A_j \mu_j)^{2/3}&lt;/script&gt;

&lt;p&gt;同时&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum A_j \mu_j = A(\mathrm{H})\mu_\mathrm{H} + A(\mathrm{He})\mu_\mathrm{He} + ... \approx 1.66\times 10^{-24} [1+4A(\mathrm{He})]&lt;/script&gt;

&lt;p&gt;我们又忽略了其他元素。所以类似的，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_\mathrm{g} = \text{constant} [1+4A(\mathrm{He})]^{2/3}&lt;/script&gt;

&lt;p&gt;至于电子压强，代进&lt;script type=&quot;math/tex&quot;&gt;(9.9)&lt;/script&gt;附近的结论就行了。&lt;/p&gt;

&lt;h5 id=&quot;压强和有效温度的关系&quot;&gt;压强和有效温度的关系&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP9/9.17.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/img/in-post/post-OASP9/9.18.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;继续看图说话，9.17和9.18。我们只看大气的某一层，对于电子压强来说提高温度自然有更多电子出来，所以成正比，直到氢被电离为止。正比的那一段可以用一条直线来拟合；而气体压强就和图9.15类似了，因为电子多了所以看不深，只能看到外面压强，就小了。&lt;/p&gt;

&lt;h4 id=&quot;复习&quot;&gt;复习&lt;/h4&gt;

&lt;p&gt;够长的一章。这里所提及的模型都是很简单的，只要确定了有效温度、&lt;script type=&quot;math/tex&quot;&gt;\log{g}&lt;/script&gt;和金属丰度的话就可以完全确定。放松最开始提到的假设可以造出更符合实际（或者需要）的模型，这个会在之后提到。&lt;/p&gt;
</description>
        <pubDate>Thu, 08 Mar 2018 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2018/03/08/OASP9/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/08/OASP9/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>Bash 备忘</title>
        <description>&lt;h2 id=&quot;catagory&quot;&gt;Catagory&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#jpynb&quot;&gt;Jpynb备忘&lt;/a&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#jpynb-color_change&quot;&gt;改变Notebook里面Markdown文字颜色&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#jpynb-theta&quot;&gt;Matplotlib中&lt;code class=&quot;highlighter-rouge&quot;&gt;'\theta'&lt;/code&gt;变为&lt;code class=&quot;highlighter-rouge&quot;&gt;heta&lt;/code&gt;的问题&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#py&quot;&gt;Python备忘&lt;/a&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#py-array_stack&quot;&gt;Numpy中的矩阵合并&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#py-package&quot;&gt;自己写包&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p id=&quot;jpynb&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls -1 -d */*/* | sed -e 's/\// /g' -e 's/_pipeline/ pipeline/'&lt;/code&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 29 Jan 2018 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2018/01/29/bash/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/29/bash/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>Jupyter Notebook + Python 备忘</title>
        <description>&lt;h2 id=&quot;catagory&quot;&gt;Catagory&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#jpynb&quot;&gt;Jpynb备忘&lt;/a&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#jpynb-color_change&quot;&gt;改变Notebook里面Markdown文字颜色&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#jpynb-theta&quot;&gt;Matplotlib中&lt;code class=&quot;highlighter-rouge&quot;&gt;'\theta'&lt;/code&gt;变为&lt;code class=&quot;highlighter-rouge&quot;&gt;heta&lt;/code&gt;的问题&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#py&quot;&gt;Python备忘&lt;/a&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#py-array_stack&quot;&gt;Numpy中的矩阵合并&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#py-package&quot;&gt;自己写包&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Pandas&lt;/li&gt;
&lt;/ol&gt;

&lt;p id=&quot;jpynb&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;jpynb备忘&quot;&gt;Jpynb备忘&lt;/h3&gt;

&lt;p id=&quot;jpynb-color_change&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;改变notebook里面markdown文字颜色&quot;&gt;改变Notebook里面Markdown文字颜色&lt;/h4&gt;

&lt;p&gt;例如想要这样的效果：foo &lt;font color=&quot;red&quot;&gt; bar &lt;/font&gt; foo&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;foo &amp;lt;font color='red'&amp;gt; bar &amp;lt;/font&amp;gt; foo&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;其实就是一个HTML的attribute。&lt;/p&gt;

&lt;p id=&quot;jpynb-theta&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;matplotlib中theta变为heta的问题&quot;&gt;Matplotlib中&lt;code class=&quot;highlighter-rouge&quot;&gt;'\theta'&lt;/code&gt;变为&lt;code class=&quot;highlighter-rouge&quot;&gt;heta&lt;/code&gt;的问题&lt;/h4&gt;

&lt;p&gt;这是因为&lt;code class=&quot;highlighter-rouge&quot;&gt;\t&lt;/code&gt;在字符串中会被转义为Tab，所以要在字符串前加上一个&lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt;。&lt;/p&gt;

&lt;p id=&quot;py&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;python备忘&quot;&gt;Python备忘&lt;/h3&gt;

&lt;p id=&quot;py-array_stack&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;numpy中的矩阵合并&quot;&gt;Numpy中的矩阵合并&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;列合并/扩展：np.column_stack()&lt;/li&gt;
  &lt;li&gt;行合并/扩展：np.row_stack()&lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;py-pandas&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;pandas&quot;&gt;Pandas&lt;/h4&gt;

&lt;p&gt;DataFrame里面选出几列：&lt;code class=&quot;highlighter-rouge&quot;&gt;df[['a', 'b']]&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;从pdf中提取表格&quot;&gt;从pdf中提取表格&lt;/h4&gt;
&lt;p&gt;先安装tabula-py：
&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install tablua-py&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;导入，使用：&lt;/p&gt;

&lt;div class=&quot;language-py highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tabula&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tabula&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_pdf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'xxx.pdf'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'--pages 4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p id=&quot;py-package&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;自己写包&quot;&gt;自己写包&lt;/h4&gt;

&lt;p&gt;一直都想这么干了，之前的代码都是复制粘贴，觉得很没有效率；所以决定将常用的代码写成一个包方便调用。目标是想numpy一样有层级，同时只导入包名能用Tab提示下面层级的内容。&lt;/p&gt;

&lt;p&gt;首先描述文件结构：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\ruler
  \ruler
    __init__.py
    convert.py
    \subpackage
      __init__.py
      something.py
  setup.py
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;因为还没完全写好，就先把一个示例放上来。最外面的ruler是安装用的，不叫包名应该也可以（但是如果要上传到PyPi的话应该有要求），里面的setup.py需要有这样的内容：&lt;/p&gt;

&lt;div class=&quot;language-py highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;setuptools&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'ruler'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'0.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'The ruler for spectra'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Mingjie Jian'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;author_email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'ssaajianmingjie@gmail.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;license&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'MIT'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;packages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'ruler'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;zip_safe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;如果只有&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;version&lt;/code&gt;的话可能也行。第二层的ruler是真正的包，它以及里面的每个文件夹都需要有一个&lt;code class=&quot;highlighter-rouge&quot;&gt;__init__.py&lt;/code&gt;，表示这是包。从这一级开始里面就可以放module，也就是&lt;code class=&quot;highlighter-rouge&quot;&gt;.py&lt;/code&gt;文件了。不过要达到之前的目的（仅import包名但自动提示模块）需要在每一个&lt;code class=&quot;highlighter-rouge&quot;&gt;__init__.py&lt;/code&gt;里面将对应文件夹包含的module以及子文件夹们import掉；比如ruler里面的要这样写：&lt;/p&gt;

&lt;div class=&quot;language-py highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;convert&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subpackage&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;当然subpackage里面的也需要这样写才能把所有的module都带上。想要测试的话先import然后用&lt;code class=&quot;highlighter-rouge&quot;&gt;dir()&lt;/code&gt;看看module和子文件夹在不在里面就行。&lt;/p&gt;

&lt;p&gt;这些搞定之后就可以跑回最外级的ruler里面打开终端，运行&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install -e .&lt;/code&gt;。暂时不知道为什么，但是这种方法可以直接在Jpynb里面用，把Jpynb重启一遍就行了。&lt;/p&gt;

&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;https://docs.python.org/3/tutorial/modules.html#packages&quot;&gt;Python Tutorial Chap. 6&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://python-packaging.readthedocs.io/en/latest/index.html&quot;&gt;How To Package Your Python Code&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://codingpy.com/article/python-import-101/&quot;&gt;Python导入模块的几种姿势&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;pandas-1&quot;&gt;Pandas&lt;/h4&gt;

&lt;h5 id=&quot;读取固定宽度表格&quot;&gt;读取固定宽度表格&lt;/h5&gt;
&lt;div class=&quot;language-py highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_fwf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'catalog/Kovtyukh/Kovtyukh04/table1.dat'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                           &lt;span class=&quot;n&quot;&gt;colspecs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;46&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                                     &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;52&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;53&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;68&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)],&lt;/span&gt;
                           &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Star'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Teff'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'e_Teff'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'logg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Vt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'[Fe/H]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'VMAG'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;s&quot;&gt;'B-V'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Rem'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Mon, 29 Jan 2018 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2018/01/29/jpynb/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/29/jpynb/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>箱根探路者</title>
        <description>&lt;p&gt;箱根是我一直想去的地方，一是因为在那能看见富士山，第二是那里是新世纪福音战士第三新东京市的原型。正好这周想出去逛逛（当然发现switch入货是临时的事情），来实习的诺亚同学也刚好错过了松永组织的镰仓社寺一日游（真的全是社寺），就拉上他一起去那看看了。当然也有踩点的意思，毕竟下个月打算还来一次。&lt;/p&gt;

&lt;h3 id=&quot;大致路线&quot;&gt;大致路线&lt;/h3&gt;

&lt;p&gt;因为只能去一天，所以基本上是按照小田急给出的示范行程来走的，从箱根汤本一路往西经过强罗、大涌谷到达桃源台港，然后坐船穿过芦之湖到达箱根町和元箱根，稍作参观之后坐巴士回到箱根汤本，終了。一路的交通都是挺方便的。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/hakone-route.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;出发之前&quot;&gt;出发之前&lt;/h3&gt;

&lt;p&gt;东京到箱根的交通大致分为两类：不使用JR和使用JR。一般不使用JR的方式是在新宿站购买小田急的箱根Free Pass（箱根フリーパス）并预约来回的特急“浪漫特快”（ロマンスカー），这样可以解决全部在箱根的交通问题和一大部分的景点门票。从新宿出发的2日箱根Free Pass是5140日元（儿童是1500），购买Free Pass之后单程的浪漫特快还需要加890日元，所以一共是6920日元。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/freepass-price.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Free Pass只有两天和三天的选择，所以即使只去一天也需要买两天的。不过这么一圈坐下来如果不买Pass的话大概是六千多日元，而且有Pass的话上下车相对自由一点。这些票都可以在新宿或者小田原的小田急窗口处购买。&lt;/p&gt;

&lt;p&gt;如果有JR Pass的话也可以选择乘坐JR到小田原再转箱根登山铁道到箱根汤本。上面最后一行写的就是在小田原购买箱根Free Pass的价格；如果不购买的话交通费大概是四千七日元，所以也还是买Pass便宜一点。&lt;/p&gt;

&lt;h3 id=&quot;特急浪漫特快&quot;&gt;特急“浪漫特快”&lt;/h3&gt;

&lt;p&gt;开往箱根汤本的浪漫特快无论工作日还是周末都是从7点钟开始首发，平均下来大概半个小时一班的样子。不住在新宿附近的话周末选择7:30、8:00、8:30或者9:00的比较合适，工作日的话就是7:00、7:27或者8:53了。（请注意时刻表可能会变，请到&lt;a href=&quot;http://www.odakyu.jp/romancecar/timetable/weekday/&quot;&gt;这里&lt;/a&gt;确认一下）。回来的车基本上都会停新宿，所以选择余地比较大，我觉得晚上7点出发的比较合适。&lt;/p&gt;

&lt;p&gt;时刻表里面带“展”字的车次是有展望席的，车头或者车尾有很大的窗户，适合观景。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/view-seat.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;大概是这个样子，司机要爬到上面开车。这些票和旺季（春节？）的特急票都可以在&lt;a href=&quot;https://www.web-odakyu.com/e-romancecar/&quot;&gt;这里&lt;/a&gt;提前预约或者购买。实际上展望席后面还紧接着两个不算展望席的座位，但是位置是和展望席一样的，所以没有预约到展望席又想坐在附近的话不妨在买票的时候问问还有没有展望席的位置。&lt;/p&gt;

&lt;p&gt;浪漫特快虽然叫特快，但是毕竟不是新干线而且过了小田原之后的登山铁道部分只有单线，所以从新宿出发还是需要85分钟的，请带上论文/书/ipad/3DS/Switch等。&lt;/p&gt;

&lt;h3 id=&quot;强罗午饭&quot;&gt;强罗=午饭&lt;/h3&gt;

&lt;p&gt;出于对时间的些许担心，我们决定到了箱根汤本之后马上去强罗。换乘去强罗的登山电车不需要出闸，直接到3号站台坐车就行。虽然从地图上看箱根汤本到强罗并不算远，但是登山电车本来就慢加上路上有三处像京张铁路的人字形轨道，所以整个用时为40分钟。这么下来我们到强罗的时候已经是10点半，该吃午饭了。&lt;/p&gt;

&lt;p&gt;这么早考虑午饭的原因在于想去试试一家比较出名的餐厅，田むら銀かつ亭。很多攻略都推荐了这家餐厅，既然来了就去试试呗。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/resturant.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;就是这家。11点开始营业，但是一般10点半开始就会有人来取号，开始营业之后按照号码顺序就餐。我们大概是40到的，已经是11号了。当然吃完之后出来发现还有将近三十个号在排队，看来的确挺出名的。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/lunch.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;午饭基本上点的都是招牌套餐，豆腐猪排套餐(1330日元)和御膳(2050日元)。这两种的区别在于后者多了一个甜品、饮料和沙拉，而且后者的猪排下面是有小火一直加热的。我上面点的是套餐，就只有这几样。感觉还挺好吃，不过排队的人数让我觉得里面也有宣传的成分。&lt;/p&gt;

&lt;h3 id=&quot;强罗公园&quot;&gt;强罗公园&lt;/h3&gt;

&lt;p&gt;吃完饭之后走了走附近的强罗公园。冬天能看的不多，也没有雪，就是近处的温泉和远处的火山烟：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/gora-park.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;值得一提的是公园里面还有两个热带植物馆，可以取暖（误）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/park-flower1.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/park-flower2.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;看到了在南方随处可见的勒杜鹃还有鹤望兰。&lt;/p&gt;

&lt;h3 id=&quot;大涌谷&quot;&gt;大涌谷&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/cable-car.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;从强罗公园南门出来左转走一分钟就到了登山缆车的公园下站，等一会就有缆车带着上到早云山了。还是要注意一下发车时刻的，间隔在20分钟左右。本来在早云山可以直接转乘空中缆车到达大涌谷（顺便在空中看看硫磺烟），但是1月16日到2月7日之间早云山-大涌谷之间的&lt;a href=&quot;http://www.hakoneropeway.co.jp/info_img/255_pdf.pdf&quot;&gt;缆车维修&lt;/a&gt;，所以只能坐专用的大巴过去。出战之后跟着大部队走就行了，我们坐的是旅游大巴所以都有位置。&lt;/p&gt;

&lt;p&gt;大涌谷就是火山活动留下来的一直在往外冒烟的山谷，而因为附近硫磺比较多所以空气比较…臭。看还是挺好看的，也有很多吃的和纪念品卖。最出名的应该就是黑色的鸡蛋了，用山上的温泉泡熟，因为水中的成分和鸡蛋壳作用变成了黑色。实际上就是煮鸡蛋，里面没有任何区别。大涌谷本来还有两条登山道，但是我们去的时候因为空气中硫化物含量太高&lt;a href=&quot;http://www.hakoneropeway.co.jp/ohwakudani/&quot;&gt;封闭了&lt;/a&gt;，可惜。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/owakudani.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;芦之湖&quot;&gt;芦之湖&lt;/h3&gt;

&lt;p&gt;整个行程可能最需要注意的就是芦之湖海贼船的&lt;a href=&quot;https://www.hakone-kankosen.co.jp/timesheet/&quot;&gt;时刻表&lt;/a&gt;了，间隔可能会到一个小时左右，所以在大涌谷的时候要留意时间。大涌谷到湖边的桃源台港需要16分钟，也是空中缆车，之后就可以等着船准备坐半个小时了。如果嫌船挤的话可以花500日元买高级舱的票，人就不那么多了（资本主义）。在船上可以看见湖边的鸟居：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/lake-tori.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;至于终点到箱根町还是元箱根都没什么所谓，就算是走路也才十来分钟而已，还有巴士来往。&lt;/p&gt;

&lt;h3 id=&quot;箱根町和元箱根&quot;&gt;箱根町和元箱根&lt;/h3&gt;

&lt;p&gt;到这里的时候已经过了四点，天开始黑了，我们就只走了走箱根关所和恩赐箱根公园。这公园原来是天皇避暑的地方，也接待过不少政界要人，但是在之后的两次地震之中塌了75%的楼宇……现在只有一栋楼在那了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/park-tree.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;别的还有箱根神社可以看看，挺大的。晚上路灯亮了之后很有神秘的感觉。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-hakone-pathfinder/shrine.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后就是坐巴士回箱根汤本了。在元箱根出发的话R、H和K线都能到箱根汤本，每天的最后一班是R线17:40的车，25分钟到箱根汤本。错过了的话……我不知道了:)&lt;/p&gt;

&lt;h3 id=&quot;回程&quot;&gt;回程&lt;/h3&gt;

&lt;p&gt;回去之后还有一点时间，想逛一下EVA屋但是关门了。这个时候基本上所有的店铺都开始关门了，但是还是可以进去逛一下的；站内的商店没关，但是便当就不一定有了，另外我们坐的19:10的特急没有车内售卖的服务，所以最差的情况可能需要在附近的便利店买点吃的或者看看站台的小卖部有没有了（但是我没有确认过）。回到新宿8点半，时间挺合适。我觉得箱根还是一天比较好，虽然是一天稍微有一点赶，但是两天又感觉景点不够支撑的，没有太特别的理由一天就行。&lt;/p&gt;

&lt;h3 id=&quot;also-read&quot;&gt;Also Read&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.hakonenavi.jp/cn/&quot;&gt;小田急箱根导航&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.marshyfood.com/2015/06/2015.html&quot;&gt;有用的攻略&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 22 Jan 2018 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2018/01/22/hakone-pathfinder/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/22/hakone-pathfinder/</guid>
        
        <category>hanging-around</category>
        
        
      </item>
    
      <item>
        <title>如何在Linux上制作延时摄影视频</title>
        <description>&lt;p&gt;在Windows上制作延时摄影有很多软件，AE、LRTimelapse（去闪）之类的；但是Linux上相关的制作软件虽然有，但是并不是很熟悉。隐约感觉Linux肯定能做，而且可以在命令行上面做，但是需要问问谷歌。结果来说的确可以做出来，这里就把相关的软件以及命令记录一下。&lt;/p&gt;

&lt;h3 id=&quot;原材料&quot;&gt;原材料&lt;/h3&gt;

&lt;p&gt;2017年底拍摄的东大赤门的100张照片，间隔大概在1秒左右，jpg格式。&lt;/p&gt;

&lt;h4 id=&quot;if-raw-file&quot;&gt;If raw file&lt;/h4&gt;

&lt;p&gt;https://www.darktable.org/&lt;/p&gt;

&lt;p&gt;批处理：lighttable -&amp;gt; history stack; copy and paste&lt;/p&gt;

&lt;h3 id=&quot;处理jpg文件&quot;&gt;处理jpg文件&lt;/h3&gt;

&lt;p&gt;因为拍摄的时候曝光有点不足，所以需要对每张照片进行亮度和对比度的处理。这里用的是GIMP；如果没有安装过的话先安装GIMP：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install gimp&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;然后安装批处理的插件：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install gimp-plugin-registry&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-time-lapse-linux/batch-open.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;安装之后打开GIMP，上方菜单栏里面会多了一些栏目。选择&lt;code class=&quot;highlighter-rouge&quot;&gt;Filters - Batch - Batch Process&lt;/code&gt;：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-time-lapse-linux/batch-window.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这个批处理窗口提供了一些我们需要的功能。选择&lt;code class=&quot;highlighter-rouge&quot;&gt;Add Files&lt;/code&gt;将要处理的照片都添加进去。简单的亮度对比度颜色处理在&lt;code class=&quot;highlighter-rouge&quot;&gt;Colour&lt;/code&gt;里面，选择&lt;code class=&quot;highlighter-rouge&quot;&gt;Enable&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;Auto Levels&lt;/code&gt;就可以了。最后在&lt;code class=&quot;highlighter-rouge&quot;&gt;Rename&lt;/code&gt;里面选择要输出的文件夹，需要的话先测试一下(&lt;code class=&quot;highlighter-rouge&quot;&gt;Test&lt;/code&gt;)，觉得没有问题的话&lt;code class=&quot;highlighter-rouge&quot;&gt;Start&lt;/code&gt;就行。处理过程中可能会报错，但是只要能成功输出就不用管了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-time-lapse-linux/comp.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;处理前后的对比&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;将jpg转换成视频&quot;&gt;将jpg转换成视频&lt;/h3&gt;

&lt;p&gt;所以我们现在有了一堆处理过的jpg文件，之后只要把它们拼成视频就行了。这一步需要保证文件的顺序是正确的，也就是没有从999到001的情况。如果有的话需要将它们按照正确的顺序重命名。另一个需要注意的细节是可以通过命令调节输出视频的分辨率，不过我一般按照源片的分辨率来，也不用调整了。拼合的命令如下：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ffmpeg -r 24 -pattern_type glob -i '*.jpg' -c:v copy output.avi&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-r&lt;/code&gt;后面的数字是帧数，可以随意调整，最后的&lt;code class=&quot;highlighter-rouge&quot;&gt;output.avi&lt;/code&gt;是输出的文件名字。我还没试过其他的格式，而这个命令会原原本本地将照片拼到一个视频里面，所以这个视频是没有被压缩过的，占用的空间和照片们的空间一样。&lt;/p&gt;

&lt;p&gt;这里的视频大小是2.2G，只是100张照片。当然这个大小不能轻易地放到网上去共享，所以我们进行压缩：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ffmpeg -i MVI_7274.MOV -vcodec libx264 -preset fast -crf 20 -y -vf &quot;scale=1920:-1&quot; -acodec libmp3lame -ab 128k a.mp4&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;参考链接里面有很详细的介绍，这里不赘述了。最重要的是&lt;code class=&quot;highlighter-rouge&quot;&gt;-crf&lt;/code&gt;后面的参数，数字越小视频质量越高。可以多试几个不同的数字然后取合适的大小和质量。最后的视频如下：&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;400&quot; src=&quot;/img/in-post/post-time-lapse-linux/cloud_tl.mp4&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;闲话&quot;&gt;闲话&lt;/h3&gt;

&lt;p&gt;刚刚想到其实也有别的思路，比如在GIMP编辑照片的时候将分辨率降低，那么占用的空间和后续处理时间都会变小。另外GIMP也有命令行模式，应该可以更细致地控制参数；不过稍微有点复杂，还需要研究一下。&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;Reference&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://ubuntuforums.org/showthread.php?t=2022316&quot;&gt;jpg转成视频&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000002502526&quot;&gt;视频压缩&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 21 Jan 2018 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2018/01/21/time-lapse-linux/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/21/time-lapse-linux/</guid>
        
        <category>experience</category>
        
        
      </item>
    
      <item>
        <title>OASP笔记 - 8</title>
        <description>&lt;p&gt;虽然第七章说了“只要知道源函数，之后就可以根据辐射转移方程算出每一点的辐射强度了”，但那是对于光深来说的，也就是&lt;script type=&quot;math/tex&quot;&gt;I_\nu(\tau_\nu)&lt;/script&gt;；如果我们继续将光深拆开我们发现我们还要先知道&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;，也就是吸收系数。由原子的束缚-束缚跃迁引起的吸收系数当然只在某个波长范围内才不为0（形成谱线），但是由另一些跃迁/物理过程引起的吸收系数却对很宽的波长范围有效，我们称之为连续谱吸收系数。连续谱吸收的重要性在于它决定了光谱整体的形状，当我们希望比较理论光谱和观测光谱的时候需要将理论的归一化光谱转换成真正的光谱。同时在计算恒星模型的时候我们也需要用到连续吸收系数，除非我们直接用已知的模型来套在其他恒星身上。所以这章讨论的就是连续谱的吸收系数。&lt;/p&gt;

&lt;h3 id=&quot;连续谱吸收的来源&quot;&gt;连续谱吸收的来源&lt;/h3&gt;

&lt;p&gt;连续谱吸收的来源可以被归为两大类：电离过程（以及逆过程）和束缚-束缚跃迁。电离过程当然可以吸收/发出任何波长的光，只是量的多少而已。但是束缚-束缚跃迁作为谱线的主要来源一般是不作为连续谱吸收考虑的，这里的例外情况是当谱线非常密集的时候，它们总体造成的结果很像连续谱的吸收。之后我们会主要讨论这两类的吸收；但是在进入每种详细的吸收系数计算之前有必要先定义一个中间量：原子吸收系数。&lt;/p&gt;

&lt;p&gt;原子吸收系数&lt;script type=&quot;math/tex&quot;&gt;\alpha&lt;/script&gt;指的是在某个波长上一个原子（或者是其他吸收粒子）的吸收截面大小。这个值肯定随着波长变化，而它乘上原子的数量（或者是归一化到另一种原子比如说氢原子的数量比例）就是这种原子的连续吸收系数&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;或者&lt;script type=&quot;math/tex&quot;&gt;\kappa_\lambda&lt;/script&gt;了。实际上原子吸收系数的推导比较复杂，所以之后一般只给出结论；来源会在文中标明，或者去看Ivan Hubeny《Theory of Stellar Atmospheres: An Introduction to Astrophysical Non-equilibrium Quantitative Spectroscopic Analysis》的第七章（后面提及的时候简称为TSA；我先吐会血）。&lt;/p&gt;

&lt;h3 id=&quot;受激辐射因子&quot;&gt;受激辐射因子&lt;/h3&gt;

&lt;p&gt;还有一个小东西要先提出来。很多过程中是有受激辐射的；本来我处于一个高能态但是环境不变的话我不会放出光子，现在你拿光来照我我肯定受不了要往低能态跑，光子就多了。考虑&lt;script type=&quot;math/tex&quot;&gt;(5.17)&lt;/script&gt;第二条式子和第一章里面的两能级占据数比例关系，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \kappa_\nu\rho &amp; = N_l B_{lu} h\nu - N_uB_{ul} h\nu \\ &amp;= N_l B_{lu} h\nu (1 - \frac{N_uB_{ul}}{N_l B_{lu}}) \\ &amp;= N_l B_{lu} h\nu (1-e^{-h\nu/kT}) \end{align} \tag{8.1} %]]&gt;&lt;/script&gt;

&lt;p&gt;所以考虑受激辐射的时候只是比单纯考虑吸收多乘上一个&lt;script type=&quot;math/tex&quot;&gt;(1-e^{-h\nu/kT})&lt;/script&gt;因子；这是当然的因为吸收光的物质本身也在发出光子所以总吸收就减小了。这给我们的计算带来的不小的方便，只需要先算好所有的吸收然后在最后加起来之后乘上这个因子就对了；我们将在最后才乘上它。&lt;/p&gt;

&lt;h3 id=&quot;中性氢&quot;&gt;中性氢&lt;/h3&gt;

&lt;h5 id=&quot;束缚-自由跃迁&quot;&gt;束缚-自由跃迁&lt;/h5&gt;

&lt;p&gt;有必要先把里德堡公式搬出来：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{1}{\lambda} = R(\frac{1}{n^2} - \frac{1}{m^2}) \tag{8.2}&lt;/script&gt;

&lt;p&gt;讨论电离的时候把&lt;script type=&quot;math/tex&quot;&gt;m&lt;/script&gt;改成&lt;script type=&quot;math/tex&quot;&gt;\infty&lt;/script&gt;就行了。我们之后用&lt;script type=&quot;math/tex&quot;&gt;\chi&lt;/script&gt;表示能级&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;与基态之间的能量，&lt;script type=&quot;math/tex&quot;&gt;I&lt;/script&gt;表示基态到&lt;script type=&quot;math/tex&quot;&gt;n = \infty&lt;/script&gt;之间的能量：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \chi &amp;= I - hRc/n^2 \\ &amp;= hRc - hRc/n^2 \\ &amp;= I(1 - 1/n^2) \end{align} \tag{8.3} %]]&gt;&lt;/script&gt;

&lt;p&gt;中性氢的束缚-自由辐射（电离）可以发生在任一个能级上；&lt;a href=&quot;http://www.tandfonline.com/doi/abs/10.1080/14786442308565244&quot;&gt;Kramers (1923)&lt;/a&gt;和&lt;a href=&quot;http://adsabs.harvard.edu/abs/1930RSPTA.229..163G&quot;&gt;Gaunt (1930)&lt;/a&gt;推出了束缚-自由辐射的吸收系数：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \alpha_\mathrm{bf} &amp;= \frac{32}{2^{3/2}}\frac{\pi^2e^6}{h^3}\frac{R}{n^5\nu^3}g_\mathrm{bf} \\ &amp;= \frac{32}{2^{3/2}}\frac{\pi^2e^6}{h^3c^3}\frac{R\lambda^3}{n^5}g_\mathrm{bf} \\ &amp;= \alpha_0g_\mathrm{bf} \frac{\lambda^3}{n^5} \mathrm{cm^2}每个中性氢 \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;当&lt;script type=&quot;math/tex&quot;&gt;\lambda&lt;/script&gt;以埃为单位时&lt;script type=&quot;math/tex&quot;&gt;\alpha_0 = 1.0449\times10^{-26}&lt;/script&gt;；&lt;script type=&quot;math/tex&quot;&gt;g_\mathrm{bf}&lt;/script&gt;是从经典转换到量子的因子，接近1。&lt;a href=&quot;http://adsabs.harvard.edu/abs/1961ApJS....6..167K&quot;&gt;Karzas and Latter (1961)&lt;/a&gt;给出了一个表，但是一般来说用&lt;a href=&quot;http://adsabs.harvard.edu/abs/1935MNRAS..96...77M&quot;&gt;Menzel and Pekris (1935)&lt;/a&gt;的公式就足够了：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;g_\mathrm{bf} = 1 - \frac{0.3456}{(\lambda R^{1/3})}(\frac{\lambda R}{n^2}-\frac{1}{2})&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} g_\mathrm{ff} &amp;= 1 + \frac{0.3456}{(\lambda R^{1/3})}(\frac{\lambda kT}{hc}-\frac{1}{2}) \\ &amp;= 1 + \frac{0.3456}{(\lambda R^{1/3})}(\frac{\log{e}}{\theta \chi_\lambda}-\frac{1}{2}) \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;分别对应束缚-自由和自由-自由过程。&lt;script type=&quot;math/tex&quot;&gt;\lambda&lt;/script&gt;仍然以埃为单位，&lt;script type=&quot;math/tex&quot;&gt;\theta = \frac{5040}{T}&lt;/script&gt;。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP8/gaunt.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;束缚-自由过程的Gaunt因子&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP8/alpha_H_bf.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;(线系限波长取自维基百科)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;如上图，不同线系在波长小于线系限处&lt;script type=&quot;math/tex&quot;&gt;\alpha_\mathrm{bf}&lt;/script&gt;不为0，且在线系限处&lt;script type=&quot;math/tex&quot;&gt;\lambda = n^2/R&lt;/script&gt;，所以此处的&lt;script type=&quot;math/tex&quot;&gt;\alpha_\mathrm{bf}&lt;/script&gt;与&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;成正比。&lt;script type=&quot;math/tex&quot;&gt;n = 1&lt;/script&gt;时的氢原子波尔半径为&lt;script type=&quot;math/tex&quot;&gt;0.53 Å&lt;/script&gt;，对应的“面积”为&lt;script type=&quot;math/tex&quot;&gt;8.8 \times 10^{-17} \mathrm{cm^2}&lt;/script&gt;，和912&lt;script type=&quot;math/tex&quot;&gt;Å&lt;/script&gt;处的原子吸收系数在同一个量级上。&lt;script type=&quot;math/tex&quot;&gt;\alpha_\mathrm{bf}&lt;/script&gt;的上升是很快的(&lt;script type=&quot;math/tex&quot;&gt;\propto \lambda^3&lt;/script&gt;)，而且从图中看到即使我们只考虑某个&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;主导的波长范围，其他&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;的吸收系数也不能忽略（特别是长波处），所以在求&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;的时候要从某个&lt;script type=&quot;math/tex&quot;&gt;n_0&lt;/script&gt;开始，对之后所有的&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;求和：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{H_{bf}}) = \sum_{n_0}^\infty \frac{\alpha_\mathrm{bf}(\mathrm{H})N_n}{N}&lt;/script&gt;

&lt;p&gt;利用&lt;a href=&quot;https://mingjiejian.github.io/2017/11/11/OASP1/&quot;&gt;第一章&lt;/a&gt;原子激发和电离的公式并将氢原子能级的可能态数代入：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \frac{N_n}{N} &amp;= \frac{g_n}{g_1} e^{-\frac{\chi}{kT}} \\ &amp;= \frac{2n^2}{2} e^{-\frac{\chi}{kT}} \end{align} %]]&gt;&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \Rightarrow \kappa(\mathrm{H_{bf}}) &amp;= \alpha_0 \sum^{n_0}_\infty \frac{\lambda^3}{n^3}g_\mathrm{bf}e^{-\frac{\chi}{kT}} \\ &amp;= \alpha_0 \sum^{n_0}_\infty \frac{\lambda^3}{n^3}g_\mathrm{bf}10^{-\theta\chi} \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;Unfold (1995)证明了大于&lt;script type=&quot;math/tex&quot;&gt;n_0 + 2&lt;/script&gt;的项之和可以用一个积分来代替：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum_{n_0+3}^\infty \frac{1}{n^3}e^{-\frac{\chi}{kT}} = -\frac{1}{2} \int_{n_0+3}^{\infty} e^{-\chi/kT} d(1/n^2)&lt;/script&gt;

&lt;p&gt;由&lt;script type=&quot;math/tex&quot;&gt;(8.3)&lt;/script&gt;得&lt;script type=&quot;math/tex&quot;&gt;d\chi = -Id(1/n^2)&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \sum_{n_0+3}^\infty \frac{1}{n^3}e^{-\frac{\chi}{kT}} &amp;= \frac{1}{2} \int_{n_0+3}^{\infty} e^{-\chi/kT} \frac{d(\chi)}{I} \\ &amp;= \frac{kT}{2I} (e^{-\chi_3/kT} - e^{-I/kT}) \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;其中&lt;script type=&quot;math/tex&quot;&gt;\chi_3 = I[1 - \frac{1}{(n_0+3)^2}]&lt;/script&gt;。不同&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;的Gaunt因子又被设成了1，因为这个积分相比前面三项求和来说很小。&lt;/p&gt;

&lt;p&gt;所以最终的吸收系数为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{H_{bf}}) = \alpha_0\lambda^3[\sum_{n_0}^{n_0+2}\frac{g_\mathrm{bf}}{n^3}10^{-\theta\chi} + \frac{\log{e}}{2\theta I}(10^{-\chi_2\theta} - 10^{-I\theta})]&lt;/script&gt;

&lt;h5 id=&quot;自由-自由跃迁&quot;&gt;自由-自由跃迁&lt;/h5&gt;

&lt;p&gt;自由-自由跃迁的吸收截面比束缚-自由跃迁的小不少，同时它还和自由电子的速度有关。&lt;a href=&quot;http://www.tandfonline.com/doi/abs/10.1080/14786442308565244&quot;&gt;Kramers (1923)&lt;/a&gt;给出了结论：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;d\alpha_\mathrm{ff}(\mathrm{H}) = \frac{2}{3^{3/2}}\frac{h^2e^2R}{\pi m_e^3} \frac{1}{\nu^3v} dv&lt;/script&gt;

&lt;p&gt;那么要求&lt;script type=&quot;math/tex&quot;&gt;\alpha_\mathrm{ff}(\mathrm{H})&lt;/script&gt;当然要将上式乘上Maxwell-Boltzmann分布再积分：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \alpha_\mathrm{ff}(\mathrm{H}) &amp;= \frac{2}{3^{3/2}}\frac{h^2e^2R}{\pi m_e^3} \frac{1}{v} \int_0^\infty (\frac{2}{\pi})^{1/2} (\frac{m}{kT})^{3/2} v e^{-(mv^2/kT)} \\ &amp;= \frac{2}{3^{3/2}}\frac{h^2e^2R}{\pi m_e^3} \frac{1}{v} (\frac{2m}{\pi kT})^{1/2} \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;同理，吸收系数就是吸收截面乘上Guant因子和归一化的粒子数量（在这里是质子和电子）就行了：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{H_{ff}}) = \frac{\alpha_\mathrm{ff}(\mathrm{H}) g_\mathrm{ff} N_\mathrm{p} N_\mathrm{e}}{N_0}&lt;/script&gt;

&lt;p&gt;加上Saha公式（不过我还没推出来）：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{H_{ff}}) = \alpha_0 \lambda^3 g_\mathrm{ff} \frac{\log{e}}{2\theta I} 10^{-\theta I}&lt;/script&gt;

&lt;p&gt;在B、A型恒星中，中性氢是主要的连续谱吸收来源，所以我们会在它们的光谱中看到明显的特征比如线系限处的下降。但是低温恒星的中性氢吸收很少，主要来源转为负氢离子。&lt;/p&gt;

&lt;h3 id=&quot;负氢离子&quot;&gt;负氢离子&lt;/h3&gt;

&lt;p&gt;负氢离子就是氢原子加上一个电子在周围，并没有养生功效（比如&lt;a href=&quot;https://www.youtube.com/results?search_query=Negative+Hydrogen+Ions&quot;&gt;这些……&lt;/a&gt;）。负氢离子的结合能是0.755eV，所以波长小于16421Å的光子都能将它电离。这些“多余”的电子来自处于电离态的金属（you know比氢氦重的家伙们），所以负氢离子以及它的吸收性质依赖于金属的丰度以及它们电离的程度。像之前说的负氢离子的吸收主要在中温度的恒星中出现；高温会把负氢离子电离，而低温会减少负氢离子所需的额外电子供给。&lt;/p&gt;

&lt;p&gt;给出结论：&lt;a href=&quot;http://adsabs.harvard.edu/abs/1979MNRAS.187P..59W&quot;&gt;Wishart (1979)&lt;/a&gt;给出了在2250到15000Å处误差小于0.2%的吸收截面六次多项式拟合：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP8/alpha_Hm_bf.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;可以看出来最大值在8500Å左右。&lt;/p&gt;

&lt;p&gt;同样的利用Saha公式:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\log{\frac{N(\mathrm{H})}{N(\mathrm{H^-})}} = -\log{P_\mathrm{e}} - \theta I + 2.5 \log{T} + \log{\frac{2}{1}} - 0.1762&lt;/script&gt;

&lt;p&gt;有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{H_{bf}^-}) = 4.158\times10^{-10} \alpha_\mathrm{bf} P_\mathrm{e} \theta^{5/2} 10^{0.754\theta}&lt;/script&gt;

&lt;p&gt;自由-自由吸收（氢原子与电子的复合）的截面以及系数的表达式由&lt;a href=&quot;http://iopscience.iop.org/article/10.1088/0022-3700/20/4/019/pdf&quot;&gt;Bell and Berrington (1987)&lt;/a&gt;给出。它主要影响红外辐射，用这个公式算出来的吸收系数已经考虑了受激辐射。图的话请看下面的gif。&lt;/p&gt;

&lt;h3 id=&quot;其他氢&quot;&gt;其他氢&lt;/h3&gt;

&lt;p&gt;继续往低温方向走，我们会遇到氢分子&lt;script type=&quot;math/tex&quot;&gt;\mathrm{H_2}&lt;/script&gt;。虽然氢分子本身并不会对光谱造成影响，但是它的离子们会。&lt;script type=&quot;math/tex&quot;&gt;\mathrm{H_2^+}&lt;/script&gt;主要在紫外造成吸收，但是在大于3800Å处的吸收只有负氢离子的百分之几。&lt;a href=&quot;https://academic.oup.com/mnras/article/112/1/40/2834699&quot;&gt;Bates (1952)&lt;/a&gt;给出了计算方法。&lt;script type=&quot;math/tex&quot;&gt;\mathrm{H_2^+}&lt;/script&gt;主要造成自由-自由辐射，因为它没有稳定的束缚态。&lt;/p&gt;

&lt;h3 id=&quot;氦&quot;&gt;氦&lt;/h3&gt;

&lt;p&gt;氦也是恒星的主要组成部分之一，但是氦不活泼，所以只能在OB型恒星里面见到。氦原子的&lt;script type=&quot;math/tex&quot;&gt;\chi_1 = 19.72&lt;/script&gt;eV，所以当第一个电子被激发的时候我们可以将剩下的原子核和电子当成一个氢原子来看待：对于&lt;script type=&quot;math/tex&quot;&gt;n \succsim 3&lt;/script&gt;来说，我们有(Ueno 1954)：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\alpha(\mathrm{He}) = 4e^{-10.92/kT}\alpha(\mathrm{H})&lt;/script&gt;

&lt;p&gt;而且这对男朋友(bf)和FFF团(ff)跃迁都有效。氦离子&lt;script type=&quot;math/tex&quot;&gt;\mathrm{He^+}&lt;/script&gt;的行为也和氢原子类似，只不过能量间隔是氢原子的大概4倍。&lt;/p&gt;

&lt;p&gt;负氦离子也是有吸收的，只不过一般不考虑束缚-自由跃迁（因为束缚能级能量大概为19eV）。John(1994)给出了自由-自由跃迁吸收截面的表达式，而知道了吸收截面之后吸收系数可以表示为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{He_{ff}^-}) = \frac{\alpha(\mathrm{He_{ff}^-})A(\mathrm{He})P_\mathrm{e}}{1 + \Phi(\mathrm{He})/P_\mathrm{e}}&lt;/script&gt;

&lt;p&gt;分母考虑了氦原子的电离。实际上&lt;script type=&quot;math/tex&quot;&gt;\mathrm{He^-}&lt;/script&gt;的吸收一般是很小的。&lt;/p&gt;

&lt;h3 id=&quot;小结&quot;&gt;小结&lt;/h3&gt;

&lt;p&gt;把所有的&lt;script type=&quot;math/tex&quot;&gt;\kappa&lt;/script&gt;加起来就变成了这样：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP8/kappa_animate.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;可以看出来低温的时候负氢离子的束缚-自由跃迁占主导，随着温度上升不断下降切换成氢原子的跃迁。&lt;/p&gt;

&lt;p&gt;坑：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;算氢原子的bf的时候只算6项不够，要算100项左右；&lt;/li&gt;
  &lt;li&gt;配分函数怎么具体算还不是很明确导致&lt;script type=&quot;math/tex&quot;&gt;\mathrm{He_{ff}^-}&lt;/script&gt;没加进去（虽然都是可以忽略的）；可能需要估计各种元素丰度？&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;电子的thomson散射&quot;&gt;电子的Thomson散射&lt;/h3&gt;

&lt;p&gt;电子的经典以及量子Thomson散射都会给出同一个吸收截面：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\alpha(\mathrm{e}) = \frac{8\pi}{3} (\frac{e^2}{m_\mathrm{e}c^2})^2&lt;/script&gt;

&lt;p&gt;不服请看TSA第六章。至于康普顿散射的截面，只有在光子能量大于5 keV，大概对应&lt;script type=&quot;math/tex&quot;&gt;5\times10^7&lt;/script&gt;度的时候才明显。虽然散射不一定是各向同性的，但是在恒星里面的光被各种散射，所以可以认为总体来说各向同性，所以：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(\mathrm{e}) = \alpha(\mathrm{e}) \frac{N_\mathrm{e}}{N_\mathrm{H}} = \alpha(\mathrm{e}) \frac{P_\mathrm{e}}{P_\mathrm{H}}&lt;/script&gt;

&lt;p&gt;考虑到恒星中的所有粒子为电子和其他粒子的和，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;N = N_\mathrm{e} + \sum N_\mathrm{j} = N_\mathrm{e} + N_\mathrm{H} \sum A_\mathrm{j}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;A_\mathrm{j} = N_\mathrm{j} - N_\mathrm{H}&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;N_\mathrm{H} = \frac{N - N_\mathrm{e}}{\sum A_\mathrm{j}}, P_\mathrm{H} = \frac{P_\mathrm{g} - P_\mathrm{e}}{\sum A_\mathrm{j}}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Rightarrow \kappa(\mathrm{e}) = \alpha(\mathrm{e}) \frac{P_\mathrm{e}}{P_\mathrm{g} - P_\mathrm{e}}\sum A_\mathrm{j}&lt;/script&gt;

&lt;p&gt;在OB型星中，氢原子被电离，&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e} \approx 0.5P_\mathrm{g}&lt;/script&gt;，&lt;script type=&quot;math/tex&quot;&gt;\kappa(\mathrm{e}) \approx \alpha(\mathrm{e}) \sum A_\mathrm{j} \approx 7\times10^{-25}&lt;/script&gt;cm^2/hydrogen particle。对于低温恒星，&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{e} \ll P_\mathrm{g} \Rightarrow \kappa_\mathrm{e} / P_\mathrm{e} \approx 7\times10^{-25}/P_\mathrm{g}&lt;/script&gt;；当&lt;script type=&quot;math/tex&quot;&gt;P_\mathrm{g} \approx 10^3-10^5&lt;/script&gt;时，散射吸收系数可以被忽略。&lt;/p&gt;

&lt;h3 id=&quot;其他的吸收源&quot;&gt;其他的吸收源&lt;/h3&gt;

&lt;p&gt;其他的就剩金属元素了。它们的束缚-自由跃迁在紫外提供了额外的吸收系数。精确的计算和之前的过程类似（参考文献请看P163-164）；一些方便的计算方法包括类氢原子的方法，但是不一定对；或者仅适用于LS耦合的quantum defect method (Burgess and Seaton 1960)。&lt;a href=&quot;http://adsabs.harvard.edu/doi/10.1086/149790&quot;&gt;Travis and Matsushima (1968)&lt;/a&gt;给出了下面的图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP8/kappa_metal.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;要注意这里取了对数，&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;的单位是&lt;script type=&quot;math/tex&quot;&gt;\mathrm{cm^2/g}&lt;/script&gt;。低温恒星还要考虑分子以及分子离子的吸收。&lt;/p&gt;

&lt;h3 id=&quot;谱线&quot;&gt;谱线&lt;/h3&gt;

&lt;p&gt;谱线和连续吸收关系不大，但是低温恒星的谱线非常密集，所以有的时候也要考虑。方法包括将谱线的吸收系数加在最后的连续吸收系数上，或者对光谱进行采样（要看！）。&lt;/p&gt;

&lt;h3 id=&quot;总连续吸收系数&quot;&gt;总连续吸收系数&lt;/h3&gt;

&lt;p&gt;好了该完了。把上面的所有吸收系数加起来，该考虑受激辐射的乘上因子：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa_\mathrm{total} = \{[\kappa(\mathrm{H_{bf}}) + \kappa(\mathrm{H_{ff}}) + \kappa(\mathrm{H_{bf}^-}) + \kappa(\mathrm{H_{2}^+})](1-10^{-\chi_\lambda \theta}) + \kappa(\mathrm{H_{ff}^-}) + ...\} \times \frac{1}{1 + \Phi(\mathrm{H})/P_\mathrm{e}}\\ + \kappa(\mathrm{metals}) + \kappa(\mathrm{He_{ff}^-}) + \kappa(\mathrm{e}) + ...&lt;/script&gt;

&lt;p&gt;大括号后面的因子是将单位从每个中性氢原子专成每个氢原子的（Saha公式）。要转成单位质量的话除一个平均质量就行：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa_\nu = \frac{\kappa_\mathrm{total}}{\sum A_j\mu_j}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;\sum A_j\mu_j&lt;/script&gt;的典型值为&lt;script type=&quot;math/tex&quot;&gt;2.0\times10^{-24}&lt;/script&gt;g/H。&lt;/p&gt;
</description>
        <pubDate>Tue, 02 Jan 2018 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2018/01/02/OASP8/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/02/OASP8/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>OASP笔记 - 7</title>
        <description>&lt;p&gt;恒星表面的主要传能方式是辐射。对流传能在恒星内部以及低温恒星是不可以忽略的，所以最后会稍微涉及到。同时也只有在辐射传能主导的区域内恒星的物理参数才会跟光谱有关系，之后也会有有效温度的例子。这一章我们会建立辐射传能的微分方程，然后讨论几种简单的解。但是除此之外的解都是数值的，需要进行数值积分。我们希望计算出合成光谱，而这个目标的前提就是有恒星光球层内尽可能多的物理参数；第七八九章就是干这个的。&lt;/p&gt;

&lt;h3 id=&quot;辐射转移方程以及它的通解&quot;&gt;辐射转移方程以及它的通解&lt;/h3&gt;

&lt;p&gt;接着&lt;a href=&quot;https://mingjiejian.github.io/2017/12/18/OASP5/&quot;&gt;第五章&lt;/a&gt;最后两条公式，假设辐射沿着&lt;script type=&quot;math/tex&quot;&gt;s&lt;/script&gt;方向传播，那么光强在一个微元上的变化&lt;script type=&quot;math/tex&quot;&gt;dI_\nu&lt;/script&gt;为损失的光加上增加的光：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;dI_\nu = -\kappa_\nu \rho I_\nu ds + j_\nu\rho ds&lt;/script&gt;

&lt;p&gt;首先看到等号后面的两项都有一个&lt;script type=&quot;math/tex&quot;&gt;\rho ds&lt;/script&gt;，同时考虑到如果能把第一项变成&lt;script type=&quot;math/tex&quot;&gt;-I_\nu&lt;/script&gt;那么积分之后就是一个负e指数函数，比较方便，所以定义&lt;strong&gt;光深&lt;/strong&gt;&lt;script type=&quot;math/tex&quot;&gt;d\tau_\nu = \kappa_\nu \rho ds&lt;/script&gt;，得&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \frac{dI_\nu}{d\tau_\nu} &amp;= -I_\nu + \frac{j_\nu}{\kappa_\nu} \\  &amp;= -I_\nu + S_\nu \end{align} \tag{7.1} %]]&gt;&lt;/script&gt;

&lt;p&gt;“对吧看着很复杂的东西为什么要去管呢？把它搞成另一个变量就好了嘛！”在这样的思想指导下我们把&lt;script type=&quot;math/tex&quot;&gt;\frac{j_\nu}{\kappa_\nu}&lt;/script&gt;叫做&lt;strong&gt;源函数&lt;/strong&gt;&lt;script type=&quot;math/tex&quot;&gt;S_\nu&lt;/script&gt;。当然实际上源函数还是代表着辐射转移方程发射（光强增加）的那一部分，只是为了凑前面光损部分的简单形式它打了个折扣，衡量得是发射与吸收的比；吸收占比越大，就越靠近负e指数下降。&lt;/p&gt;

&lt;p&gt;看着式&lt;script type=&quot;math/tex&quot;&gt;(7.1)&lt;/script&gt;我们很轻易地用膝盖想到了方程的通解应该有这样的形式：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu(\tau_\nu) = fe^{b\tau_\nu} \tag{7.2}&lt;/script&gt;

&lt;p&gt;当然&lt;script type=&quot;math/tex&quot;&gt;f&lt;/script&gt;是个函数。把它丢进&lt;script type=&quot;math/tex&quot;&gt;(7.1)&lt;/script&gt;，得到：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;bI_\nu + e^{b\tau_\nu}\frac{df}{d\tau_\nu} = -I_\nu + S_\nu&lt;/script&gt;

&lt;p&gt;前后一一对应，易得&lt;script type=&quot;math/tex&quot;&gt;b = -1&lt;/script&gt;以及&lt;script type=&quot;math/tex&quot;&gt;f = \int_0^{\tau_\nu} S_\nu e^{t_\nu} dt_\nu + c_0&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} I_\nu(\tau_\nu) &amp;= e^{-\tau_\nu}\int_0^{\tau_\nu} S_\nu e^{t_\nu} dt_\nu + c_0e^{-\tau_\nu} \\ &amp;= e^{-\tau_\nu}\int_0^{\tau_\nu} S_\nu e^{t_\nu} dt_\nu + I_\nu(0)e^{-\tau_\nu} \end{align} \tag{7.3} %]]&gt;&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;0&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;\tau_\nu&lt;/script&gt;取决于从哪开始算以及算到哪。把负e指数丢到积分号里面，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu(\tau_\nu) = \int_0^{\tau_\nu} S_\nu e^{-(\tau_\nu-t_\nu)} dt_\nu + I_\nu(0)e^{-\tau_\nu} \tag{7.4}&lt;/script&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP7/rt1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如上图，这个通解说明辐射传播方向上某一点的光强为起始点的光乘上一个负e指数衰减，加上起始点到观测点之间每一点上发出的光各自乘上负e指数衰减之和；其实挺直白的。到此似乎万事大吉，只要知道源函数表达式加上十来根头发，应该能给出解析解；不想给头发的话让计算机愣算也能给出数值解来。同时回想一下&lt;a href=&quot;https://mingjiejian.github.io/2017/12/18/OASP5/&quot;&gt;第五章&lt;/a&gt;粒子的两种散射情况，我们也能知道最简单的源函数就是平均光强(&lt;script type=&quot;math/tex&quot;&gt;J_\nu&lt;/script&gt;)和黑体辐射函数(&lt;script type=&quot;math/tex&quot;&gt;B_\nu&lt;/script&gt;)。&lt;/p&gt;

&lt;h4 id=&quot;不同形状下的辐射转移方程&quot;&gt;不同形状下的辐射转移方程&lt;/h4&gt;

&lt;p&gt;之前我们只考虑了一条直线上的辐射转移方程。对于星际介质来说这是没问题的，但是恒星是真空中的球形鸡，所以定义沿着恒星半径方向以及视线方向的光深会对解释恒星内部结构以及我们所看到的东西比较方便。用球坐标系,同时因为我们在观测，我们令&lt;script type=&quot;math/tex&quot;&gt;z&lt;/script&gt;方向为视线方向，所以：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dI_\nu}{\kappa_\nu \rho dz} = -I_\nu + \frac{j_\nu}{\kappa_\nu}&lt;/script&gt;

&lt;p&gt;将&lt;script type=&quot;math/tex&quot;&gt;z&lt;/script&gt;换成球坐标的&lt;script type=&quot;math/tex&quot;&gt;r, \theta&lt;/script&gt;：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dI}{dz} = \frac{dI}{dr}\frac{dr}{dz} + \frac{dI}{d\theta}\frac{d\theta}{dz} \tag{7.5}&lt;/script&gt;

&lt;p&gt;什么你问&lt;script type=&quot;math/tex&quot;&gt;\phi&lt;/script&gt;哪去了？当然是认为&lt;script type=&quot;math/tex&quot;&gt;\phi&lt;/script&gt;方向光强处处一样啦，简单嘛。从图中可得：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;dr = \cos{\theta} dz&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;rd\theta = -\sin{\theta} dz&lt;/script&gt;

&lt;p&gt;所以，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial I_\nu}{\partial r} \frac{\cos{\theta}}{\kappa_\nu\rho} - \frac{\partial I_\nu}{\partial \theta} \frac{\sin{\theta}}{\kappa_\nu\rho r} = -I_\nu + S_\nu \tag{7.6}&lt;/script&gt;

&lt;p&gt;对于恒星内部或者大气很厚的恒星（超巨星）来说这就是要解的方程；但是一般的恒星光球层非常薄，所以可以认为光强跟&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;也没有关系（高兴），得出：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{d I_\nu}{d r} \frac{\cos{\theta}}{\kappa_\nu\rho} = -I_\nu + S_\nu&lt;/script&gt;

&lt;p&gt;虽然不知道为什么，但是在这里我们可以定义一个和&lt;script type=&quot;math/tex&quot;&gt;dr&lt;/script&gt;反向的量&lt;script type=&quot;math/tex&quot;&gt;dx = -dr&lt;/script&gt;以及&lt;script type=&quot;math/tex&quot;&gt;d\tau'_\nu = \kappa_\nu\rho dr&lt;/script&gt;，使得这个方程的解为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu(\tau_\nu) = \int_c^{\tau_\nu} S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} d\tau'_\nu \tag{7.8}&lt;/script&gt;

&lt;p&gt;就是在&lt;script type=&quot;math/tex&quot;&gt;t_\nu, \tau_\nu&lt;/script&gt;后面加了个&lt;script type=&quot;math/tex&quot;&gt;-\sec{\theta}&lt;/script&gt;同时把常数放进了积分下限而已。这里把原来式子的&lt;script type=&quot;math/tex&quot;&gt;I_\nu(0)e^{-\tau_\nu}&lt;/script&gt;放到了积分号的下限里面是因为之前只有视线方向一个方向，但是现在有了恒星的径向（以及反径向）和视线方向，就有一个夹角的问题：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP7/rt2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当&lt;script type=&quot;math/tex&quot;&gt;\theta &gt; 90^\circ&lt;/script&gt;的时候是从外往里的方向，反之是从里往外。对于式子&lt;script type=&quot;math/tex&quot;&gt;(7.4)&lt;/script&gt;来说不同的方向只是换一个起始点和矢量而已，但是现在对于恒星光球层内部和外部来说有不同（而且可以确定）的边界条件，所以视线方向向内和向外的光强分别为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} I_\nu^\mathrm{out} &amp;= \int_{\tau_\nu}^\infty S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} dt_\nu \\ I_\nu^\mathrm{in} &amp;= -\int_0^{\tau_\nu} S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} dt_\nu \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;也就是说方向向外时从光球层最底层开始算，光深为&lt;script type=&quot;math/tex&quot;&gt;\infty&lt;/script&gt;，向内时从恒星表面开始算，光深为&lt;script type=&quot;math/tex&quot;&gt;0&lt;/script&gt;。视线方向上某一点的“总光强”为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} I_\nu(\tau_\nu) &amp;= I_\nu^\mathrm{out} + I_\nu^\mathrm{in} \\ &amp;= \int_{\tau_\nu}^\infty S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} dt_\nu -\int_0^{\tau_\nu} S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} dt_\nu \end{align} \tag{7.9} %]]&gt;&lt;/script&gt;

&lt;p&gt;所以在观测从恒星表面出射的辐射的时候用的是&lt;script type=&quot;math/tex&quot;&gt;I_\nu^\mathrm{out}(0)&lt;/script&gt;：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu^\mathrm{out}(0) = \int_{0}^\infty S_\nu e^{-t_\nu\sec{\theta}}\sec{\theta} dt_\nu \tag{7.10}&lt;/script&gt;

&lt;p&gt;这条式子会在计算合成光谱的时候用到。&lt;/p&gt;

&lt;h4 id=&quot;光强积分&quot;&gt;光强积分&lt;/h4&gt;

&lt;p&gt;就像&lt;a href=&quot;https://mingjiejian.github.io/2017/12/18/OASP5/&quot;&gt;第五章&lt;/a&gt;说的那样，实际上我们不能分辨出恒星的源面，所以当然要将光强积分成流量了。利用式&lt;script type=&quot;math/tex&quot;&gt;(5.5)&lt;/script&gt;并且认为&lt;script type=&quot;math/tex&quot;&gt;I_\nu&lt;/script&gt;与&lt;script type=&quot;math/tex&quot;&gt;\phi&lt;/script&gt;方向无关，我们得到：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} F_\nu &amp;= 2\pi \int_0^\pi I_\nu \cos{\theta} \sin{\theta} d\theta \\ &amp;= 2\pi \int_0^{\pi/2} I_\nu^\mathrm{out} \cos{\theta} \sin{\theta} d\theta + 2\pi \int_{\pi/2}^\pi I_\nu^\mathrm{in} \cos{\theta} \sin{\theta} d\theta \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;将式&lt;script type=&quot;math/tex&quot;&gt;(7.9)&lt;/script&gt;代入，得：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu = 2\pi \int_0^{\pi/2}\int_{\tau_\nu}^\infty S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} dt_\nu d\theta - 2\pi \int_{\pi/2}^\pi\int_0^{\tau_\nu} S_\nu e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} dt_\nu d\theta&lt;/script&gt;

&lt;p&gt;假设源函数各向同性，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu = 2\pi \int_{\tau_\nu}^\infty S_\nu \int_0^{\pi/2} e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} d\theta dt_\nu - 2\pi \int_0^{\tau_\nu} S_\nu \int_{\pi/2}^\pi e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} d\theta dt_\nu \tag{7.11}&lt;/script&gt;

&lt;p&gt;所以之后就看中间的那个&lt;script type=&quot;math/tex&quot;&gt;e&lt;/script&gt;指数积分了。先直接给结论：令&lt;script type=&quot;math/tex&quot;&gt;w = \sec{\theta}, x = t_\nu - \tau_\nu&lt;/script&gt;，则有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\int_0^{\pi/2} e^{-(t_\nu-\tau_\nu)\sec{\theta}}\sec{\theta} d\theta = \int_1^\infty \frac{e^{-xw}}{w^2} dw \tag{7.12}&lt;/script&gt;

&lt;p&gt;为了方便起见将后面的&lt;script type=&quot;math/tex&quot;&gt;e&lt;/script&gt;指数积分叫做&lt;script type=&quot;math/tex&quot;&gt;E_n&lt;/script&gt;:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E_n(x) = \int_1^\infty \frac{e^{-xw}}{w^n} dw \tag{7.13}&lt;/script&gt;

&lt;p&gt;所以刚刚的流量就是：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu(\tau_\nu) = 2\pi \int_{\tau_\nu}^\infty S_\nu E_2(t_\nu - \tau_\nu) dt_\nu - 2\pi \int_0^{\tau_\nu} S_\nu E_2(\tau_\nu - t_\nu) dt_\nu \tag{7.14}&lt;/script&gt;

&lt;p&gt;照例在恒星表面变成&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu(0) = 2\pi \int_{0}^\infty S_\nu(t_\nu) E_2(t_\nu) dt_\nu \tag{7.15}&lt;/script&gt;

&lt;p&gt;举一反三得K积分里面的量&lt;script type=&quot;math/tex&quot;&gt;J_\nu, K_\nu&lt;/script&gt;可以表示为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} J_\nu(\tau_\nu) &amp;= \frac{1}{2} \int_{\tau_\nu}^\infty S_\nu E_1(t_\nu - \tau_\nu) dt_\nu + \frac{1}{2} \int_0^{\tau_\nu} S_\nu E_1(\tau_\nu - t_\nu) dt_\nu \\ K_\nu(\tau_\nu) &amp;= \frac{1}{2} \int_{\tau_\nu}^\infty S_\nu E_3(t_\nu - \tau_\nu) dt_\nu + \frac{1}{2} \int_0^{\tau_\nu} S_\nu E_3(\tau_\nu - t_\nu) dt_\nu \end{align} \tag{7.16} %]]&gt;&lt;/script&gt;

&lt;h4 id=&quot;e指数积分的性质&quot;&gt;e指数积分的性质&lt;/h4&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E_n(0) = \int_1^\infty \frac{1}{w^n} dw = \frac{1}{n-1}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dE_n}{dx} = -E_{n-1} \tag{7.19}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;nE_{n+1}(x) = e^{-x} - xE_n(x) \tag{7.20}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E_n(x) \approx \frac{1}{xe^x}&lt;/script&gt;

&lt;p&gt;大概就是这样。&lt;/p&gt;

&lt;h3 id=&quot;辐射平衡&quot;&gt;辐射平衡&lt;/h3&gt;

&lt;p&gt;实际上辐射平衡指的就是能量守恒。我们认为光球层是不产生能量的，所以光球层处处都不能有源或者汇，吃进去多少就得吐出来多少。我们仍然处于平面平行层的假设之中，所以散度为0的条件可以表述为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{d}{dx}F(x) = 0, F(x) = F_0 \tag{7.21}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;x&lt;/script&gt;指的是光球层中的某一点。如果所有能量都是辐射的话，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F(x) = \int_0^\infty F(\tau_\nu) d\nu = F_0 \tag{7.22}&lt;/script&gt;

&lt;p&gt;这就是辐射平衡条件。如果也有对流的话，则变为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Phi(x) + \int_0^\infty F(\tau_\nu) d\nu = F_0 \tag{7.23}&lt;/script&gt;

&lt;p&gt;还有其他能量源的话，加上去就好了。&lt;/p&gt;

&lt;p&gt;先不管对流，将&lt;script type=&quot;math/tex&quot;&gt;(7.14)&lt;/script&gt;代入&lt;script type=&quot;math/tex&quot;&gt;(7.22)&lt;/script&gt;，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\int_0^\infty [\int_{\tau_\nu}^\infty S_\nu E_2(t_\nu - \tau_\nu) dt_\nu - 2\pi \int_0^{\tau_\nu} S_\nu E_2(\tau_\nu - t_\nu) dt_\nu] d_\nu = \frac{F_0}{2\pi} \tag{7.24}&lt;/script&gt;

&lt;p&gt;这叫做Milne第二公式，其他两条Milne公式之后会讨论到。这条公式里面唯一的未知量是&lt;script type=&quot;math/tex&quot;&gt;S_\nu(\tau_\nu)&lt;/script&gt;，也就是说在辐射平衡条件下，符合这条式子的源函数就是我们要找的源函数；把它丢回&lt;script type=&quot;math/tex&quot;&gt;(7.14)&lt;/script&gt;就可以将流量算出来了。&lt;/p&gt;

&lt;p&gt;另外两个Milne公式可以从辐射转移方程推出来：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\cos{\theta} \frac{dI_\nu}{dx} = \kappa_\nu\rho I_\nu - \kappa_\nu\rho S_\nu \tag{7.25}&lt;/script&gt;

&lt;p&gt;对立体角积分并且认为&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu, S_\nu&lt;/script&gt;与方向无关，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dF(x)}{dx} = 4\pi\kappa_\nu\rho J_\nu - 4\pi\kappa_\nu \rho S_\nu \tag{7.26}&lt;/script&gt;

&lt;p&gt;对所有频率积分，并考虑到辐射平衡条件&lt;script type=&quot;math/tex&quot;&gt;(7.21)&lt;/script&gt;，左边等于0，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\int_0^\infty \kappa_\nu\rho J_\nu d\nu = \int_0^\infty \kappa_\nu\rho S_\nu d\nu \tag{7.28}&lt;/script&gt;

&lt;p&gt;用&lt;script type=&quot;math/tex&quot;&gt;(7.16)&lt;/script&gt;的&lt;script type=&quot;math/tex&quot;&gt;J_\nu&lt;/script&gt;代入，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\int_0^\infty \kappa_\nu [\frac{1}{2} \int_{\tau_\nu}^\infty S_\nu E_1(t_\nu - \tau_\nu) dt_\nu + \frac{1}{2} \int_0^{\tau_\nu} S_\nu E_1(\tau_\nu - t_\nu) dt_\nu - S_\nu] d\nu = 0&lt;/script&gt;

&lt;p&gt;这也是一条Milne公式（书上没写是第几条…），也是给求&lt;script type=&quot;math/tex&quot;&gt;S_\nu&lt;/script&gt;用的。如果在恒星内部，所有频率上的光深都很大的话，&lt;script type=&quot;math/tex&quot;&gt;\frac{dF(x)}{dx}&lt;/script&gt;就大概为0，所以从&lt;script type=&quot;math/tex&quot;&gt;(7.26)&lt;/script&gt;我们可以认为&lt;script type=&quot;math/tex&quot;&gt;J_\nu = S_\nu&lt;/script&gt;。&lt;/p&gt;

&lt;p&gt;最后一条Milne公式是从&lt;script type=&quot;math/tex&quot;&gt;(7.25)&lt;/script&gt;乘上一个&lt;script type=&quot;math/tex&quot;&gt;\cos{\theta}&lt;/script&gt;来的。乘上之后对方位角和频率积分，最后一项就没了，剩下的是：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\int_0^\infty \frac{dK_\nu}{d\tau_\nu} = \frac{F_0}{4\pi}&lt;/script&gt;

&lt;p&gt;同样将&lt;script type=&quot;math/tex&quot;&gt;K_\nu&lt;/script&gt;代入，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\int_0^\infty \frac{d}{d\tau_\nu} [\frac{1}{2} \int_{\tau_\nu}^\infty S_\nu E_3(t_\nu - \tau_\nu) dt_\nu + \frac{1}{2} \int_0^{\tau_\nu} S_\nu E_3(\tau_\nu - t_\nu) dt_\nu - S_\nu] d\nu = \frac{F_0}{4\pi}&lt;/script&gt;

&lt;p&gt;实际上这三条Milne公式都是从光强加上辐射平衡条件来的，所以它们并不独立，满足某一条公式的源函数必定满足其他两条。回到遥远的第一章，我们可以看到现在代表着有效温度决定着&lt;script type=&quot;math/tex&quot;&gt;F_0&lt;/script&gt;，所以有效温度实际上是模型的一个重要参数。&lt;/p&gt;

&lt;p&gt;现在既然所有的公式都齐了，剩下的就是确定源函数。这里只讨论一种最简单的情况，灰大气。更复杂的情况留给论文去说。&lt;/p&gt;

&lt;h3 id=&quot;灰大气模型&quot;&gt;灰大气模型&lt;/h3&gt;

&lt;p&gt;灰大气模型确定的源函数值得在这里讨论并不仅仅是因为它是比较早得出的解，还因为它是很多其他源函数迭代的初始函数。灰大气指的是&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;与频率无关，当然它不怎么真实(by Quin)。&lt;/p&gt;

&lt;p&gt;从&lt;script type=&quot;math/tex&quot;&gt;(7.7)&lt;/script&gt;开始，将式子对全频率积分，并将积分后的结果写成不带&lt;script type=&quot;math/tex&quot;&gt;\nu&lt;/script&gt;角标的量，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\cos{\theta} \frac{dI}{d\tau} = I - S&lt;/script&gt;

&lt;p&gt;可以“简单地”理解为把角标拿掉；那么式&lt;script type=&quot;math/tex&quot;&gt;(7.22), (7.28), (7.30)&lt;/script&gt;变成：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} F &amp;= F_0 \\ J &amp;= S \\ \frac{dK}{d\tau} &amp;= \frac{F_0}{4\pi} \end{align} \tag{7.32} %]]&gt;&lt;/script&gt;

&lt;p&gt;在这里爱丁顿老爷子假设入射和出射的光强和方向无关，都是一样的，也就是：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
I(\tau) = \begin{cases} I^\mathrm{out}(\tau) &amp; 0 \le \theta \le \pi/2 \\ I^\mathrm{in}(\tau) &amp; \pi/2 \le \theta \le \pi \end{cases} %]]&gt;&lt;/script&gt;

&lt;p&gt;然后三个K积分就变成了&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} F(\tau) &amp;= \pi[I^\mathrm{out}-I^\mathrm{in}] \\ J(\tau) &amp;= \frac{1}{2}[I^\mathrm{out} + I^\mathrm{in}] \\ K(\tau) &amp;= \frac{1}{6} [I^\mathrm{out} + I^\mathrm{in}] \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;不信？不信自己代进定义里面算去。把它们丢进&lt;script type=&quot;math/tex&quot;&gt;(7.32)&lt;/script&gt;里面，该相等的相等，该积分的积分，得到&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;S(\tau) = J(\tau) = 3K(\tau)&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;K(\tau) = \frac{F_0}{4\pi}\tau + \frac{F_0}{6\pi}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Rightarrow S(\tau) = \frac{3F_0}{4\pi}(\tau+\frac{2}{3})&lt;/script&gt;

&lt;p&gt;热动平衡之下我们还有黑体辐射定律；利用&lt;script type=&quot;math/tex&quot;&gt;(6.4)&lt;/script&gt;，我们可以得出&lt;script type=&quot;math/tex&quot;&gt;S(\tau) = J(\tau) = \sigma/\pi T^4(\tau),&lt;/script&gt;&lt;script type=&quot;math/tex&quot;&gt;F_0 = \sigma T_\mathrm{eff}^4&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;T(\tau) = [\frac{3}{4}(\tau+\frac{2}{3})]^{1/4} T_\mathrm{eff} \tag{7.36}&lt;/script&gt;

&lt;p&gt;这样一来每层的温度由有效温度和光深决定，也可以知道了。如果把老爷子的假设去掉，解会从&lt;script type=&quot;math/tex&quot;&gt;\frac{2}{3} \rightarrow q(\tau)&lt;/script&gt;，稍微复杂一点。当然灰大气和实际情况差得比较远，因为大大简化了&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;的情况。&lt;/p&gt;

&lt;h3 id=&quot;对流传能&quot;&gt;对流传能&lt;/h3&gt;

&lt;p&gt;这一章快该结束了。中高温恒星的对流层比较深，但是低温恒星的对流层可以延伸到光球层的底部，所以需要考虑对流传能。对流元需要和环境温度有差别（要不然哪有能量传输），而且光深需要比较大（要不然被辐射传能搞没了）。一个对流元所携带的能量为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Phi = \rho C_p v \Delta T&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;\rho, C_p, v, \Delta T&lt;/script&gt;分别为密度、比热、速度、温度差。这些对流元可上可下、可冷可热。太阳的米粒（儿）组织就是我们可以看到的对流层的顶部，同时对流层传输的能量是辐射传能的&lt;script type=&quot;math/tex&quot;&gt;\sim 10^{-3}&lt;/script&gt;倍，可以忽略掉。但是因为对流带来的速度不均匀会对光球层产生影响（对流超射），使得谱线形状发生变化，带来不对称性，所以可以用这种不对称性来研究恒星的米粒组织（第十七章）。然后对流还会产生一些声学波，将恒星内部的元素带到恒星表面。对流传能虽然能量小，但是速度比辐射传能快，周/月的量级vs&lt;script type=&quot;math/tex&quot;&gt;\sim 10^5&lt;/script&gt;年。&lt;/p&gt;

&lt;h4 id=&quot;对流传能条件&quot;&gt;对流传能条件&lt;/h4&gt;

&lt;p&gt;一团气体能上升主要是因为它的密度比环境要小；但是气体在上升的过程中会膨胀，所以它的密度并不是不变的。当气体密度的导数比环境密度的导数小的时候，气体就可以上升（假设对流元是绝热的）：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;(\frac{d\log{\rho}}{d\log{P}})_\mathrm{cell} &gt; (\frac{d\log{\rho}}{d\log{P}})_\mathrm{average}&lt;/script&gt;

&lt;p&gt;我们比较喜欢用温度来说事，利用理想气体公式&lt;script type=&quot;math/tex&quot;&gt;P = (\rho/\mu)kT&lt;/script&gt;：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;(\frac{d\log{\rho}}{d\log{P}})_\mathrm{average} = 1 + \frac{d\log{\mu}}{d\log{P}} - \frac{d\log{T}}{d\log{P}}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Rightarrow (\frac{d\log{T}}{d\log{P}})_\mathrm{average} &gt; 1 - (\frac{d\log{\rho}}{d\log{P}})_\mathrm{cell} + \frac{d\log{\mu}}{d\log{P}}&lt;/script&gt;

&lt;p&gt;所以想有对流，一是增大左边，也就是温度梯度；温度梯度很大的时候恒星甚至会膨胀或者收缩。二是右边很小，也就是&lt;script type=&quot;math/tex&quot;&gt;(\frac{d\log{\rho}}{d\log{P}})_\mathrm{cell}&lt;/script&gt;比较大。这说明当恒星温度比较低，质量比较大的分子可以存在的时候对流比较容易产生；另一种增大它的方法是在对流元内部有辐射。&lt;/p&gt;

&lt;h4 id=&quot;混合长&quot;&gt;混合长&lt;/h4&gt;

&lt;p&gt;解决了对流发生的条件之后我们来看看对流传能的最后两项。从能量守恒有&lt;script type=&quot;math/tex&quot;&gt;\frac{1}{2}\rho v^2 = g\Delta\rho l&lt;/script&gt;，其中&lt;script type=&quot;math/tex&quot;&gt;l&lt;/script&gt;是对流元存活的长度，也就是混合长。压强平衡要求&lt;script type=&quot;math/tex&quot;&gt;\Delta \rho / \rho = \Delta T / T&lt;/script&gt;，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \Phi &amp;= \rho C_p (\frac{gl}{T})^{1/2} \Delta T^{3/2} \\ &amp;= \rho C_p (\frac{gl}{T})^{1/2} [(\frac{dT}{dx})_\mathrm{cell} - (\frac{dT}{dx})_\mathrm{average}]^{3/2} \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;混合长的具体数值是任意，没有理论支撑的；它在恒星内部有一些经验取值，但是光球层上没有。&lt;/p&gt;

&lt;p&gt;恒星的对流比较复杂，一些更准确的计算需要看相关论文。&lt;/p&gt;
</description>
        <pubDate>Wed, 27 Dec 2017 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2017/12/27/OASP7/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/12/27/OASP7/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>OASP笔记 - 6</title>
        <description>&lt;p&gt;无聊的一章。请自行谷歌黑体辐射。&lt;/p&gt;

&lt;h3 id=&quot;可公开的信息&quot;&gt;可公开的信息&lt;/h3&gt;

&lt;p&gt;韦恩定律（高频）：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu = \nu^3f(\nu/T) \tag{6.1}&lt;/script&gt;

&lt;p&gt;瑞利金斯近似（低频/长波）：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu = \frac{2kT\nu^2}{c^2} = \frac{2kT}{\lambda^2} \tag{6.6}&lt;/script&gt;

&lt;h3 id=&quot;推导&quot;&gt;“推导”&lt;/h3&gt;

&lt;p&gt;前提：只有两个能级 + 处于热动平衡&lt;/p&gt;

&lt;p&gt;第一章的原子激发与电离里面有这样的一个公式：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{N_n}{N_m} = \frac{g_n}{g_m} e^{-\frac{h\nu}{kT}}&lt;/script&gt;

&lt;p&gt;从第五章最后的两个公式得出细致平衡原理：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;N_u A_{ul} + N_u B_{ul} I_\nu = N_l B_{lu} I_\nu&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu = \frac{A_{ul}}{B_{lu}(N_l/N_u) - B_{ul}}&lt;/script&gt;

&lt;p&gt;合在一起就有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu = \frac{A_{ul}}{(g_l/g_u)B_{lu}e^{-\frac{h\nu}{kT}} - B_{ul}}&lt;/script&gt;

&lt;p&gt;将&lt;script type=&quot;math/tex&quot;&gt;e&lt;/script&gt;指数展开&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu \approx \frac{A_{ul}}{(g_l/g_u)B_{lu} + (g_l/g_u)B_{lu}\frac{h\nu}{kT} - B_{ul}}&lt;/script&gt;

&lt;p&gt;令它等于瑞利金斯近似，得&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;B_{ul} = B_{lu}g_l/g_u, A_{ul} = \frac{2h\nu^3}{c^2}B_{ul}&lt;/script&gt;

&lt;p&gt;所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu = B_\nu = \frac{2h\nu^3}{c^2} \frac{1}{e^{-\frac{h\nu}{kT}}-1}&lt;/script&gt;

&lt;p&gt;求导等于0可以得出韦恩位移定律，对频率积分可以得出斯特芬玻尔兹曼定律：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\lambda T = b, F_\nu = \oint I_\nu \cos{\theta} d\omega = \sigma T^4&lt;/script&gt;

&lt;p&gt;之前有一个疑惑就是物质的发射或者吸收是怎么从稀薄的谱线到一大块的黑体谱的，&lt;a href=&quot;https://physics.stackexchange.com/questions/105875/blackbody-radiation-and-spectral-lines&quot;&gt;这里&lt;/a&gt;有一个思路。&lt;/p&gt;

&lt;p&gt;再联络。&lt;/p&gt;
</description>
        <pubDate>Tue, 19 Dec 2017 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2017/12/19/OASP6/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/12/19/OASP6/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>OASP笔记 - 5</title>
        <description>&lt;h3 id=&quot;辐射强度-specific-intensity&quot;&gt;辐射强度 (specific intensity)&lt;/h3&gt;

&lt;p&gt;辐射强度描述的是穿过一个表面的光的强度分布，是辐射场的性质，跟接下来用到的面元的性质无关。这个量当然需要是在单位时间、单位频率下的；同时这个表面处在不同位置也会不一样，所以要将表面缩小成面元。我们先将面元固定在一个点上，看如何描述光的强度分布。&lt;/p&gt;

&lt;p&gt;我们只能通过单位时间、单位频率下穿过单位面积面元的能量大小来描述光的强度。但是面元是有朝向的，一个只朝一个方向的辐射场和面元的法向量平行的时候会产生最大的通量；如果将辐射场（或者面元）旋转一个角度，除了方向外辐射场没有任何其他的变化，不过通量就小了。然而辐射强度是辐射场的性质，和面元的方向无关，所以除了&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}A\mathrm{d}t\mathrm{d}\nu&lt;/script&gt;需要和描述辐射场强度（其实就是辐射强度）的量相乘之外，我们还需要一个表示方向的立体角源和表示方向与面元法向夹角的余弦值将（可能倾斜的）面元“摆正”，去导出正确的能量。所以能量和辐射强度有这样的关系：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathrm{d}E_\nu = I_\nu cos{\theta} \mathrm{d}\omega\mathrm{d}A\mathrm{d}t\mathrm{d}\nu&lt;/script&gt;

&lt;p&gt;也得到了辐射强度的表达式：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu = \frac{\mathrm{d}E_\nu}{cos{\theta}\mathrm{d}\omega\mathrm{d}A\mathrm{d}t\mathrm{d}\nu} \tag{5.1}&lt;/script&gt;

&lt;p&gt;它表达的是单位时间(&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}t&lt;/script&gt;)单位频率(&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}\nu&lt;/script&gt;)下穿过某一点(&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}A&lt;/script&gt;)朝某个方向(&lt;script type=&quot;math/tex&quot;&gt;cos{\theta}\mathrm{d}\omega&lt;/script&gt;)的光的能量。当然我们也可以用波长去表达，而从上式我们可以推出&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_\nu\mathrm{d}\nu = I_\lambda\mathrm{d}\lambda  \tag{5.2}&lt;/script&gt;

&lt;p&gt;它们的单位分别是&lt;script type=&quot;math/tex&quot;&gt;\mathrm{erg / (s~cm^2~rad^2~Hz)}, \mathrm{W / (m^2~rad^2~Hz)}&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;\mathrm{erg / (s~cm^2~rad^2~Å)}, \mathrm{W / (m^2~rad^2~Å)}&lt;/script&gt;。这条式子，加上熟悉的频率-波长关系&lt;script type=&quot;math/tex&quot;&gt;\lambda\nu = c&lt;/script&gt;，我们会发现同一个物体&lt;script type=&quot;math/tex&quot;&gt;I_\nu&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;I_\lambda&lt;/script&gt;的形状是不一样的。这是因为&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}\nu = -\frac{c}{\lambda^2}\mathrm{d}\lambda \Rightarrow -\frac{c}{\lambda^2}I_\nu = I_\lambda&lt;/script&gt;（负号表示波长和频率变化方向相反），所以即使不同波长下的辐射强度一样，翻译到频率下会变成一条曲线。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://soap.siteturbine.com/uploaded_files/www.oceanopticsbook.info/images/WebBook/2048a65071bc4c0a0e2402ba5bc51157.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;频域和波长域下太阳的辐射强度，可以看到形状改变了。取自&lt;a href=&quot;http://www.oceanopticsbook.info/view/light_and_radiometry/level_2/a_common_misconception&quot;&gt;这里&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;我们也可以定义平均辐射强度，为辐射强度在所有方向上的平均：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;J_\nu = \frac{1}{4\pi} \oint I_\nu \mathrm{d}\omega  \tag{5.3}&lt;/script&gt;

&lt;h3 id=&quot;流量&quot;&gt;流量&lt;/h3&gt;

&lt;p&gt;比起辐射强度，流量可能更容易理解一点。流量就是通过一个面的所有能量之和；一个方向为正的话，另一个方向就为负；或者说流量就是一个面对所有方向辐射强度的积分。从这两个表述里面我们可以得到流量的两个定义式：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu = \frac{\oint \mathrm{d}E_\nu}{\mathrm{d}A\mathrm{d}t\mathrm{d}\nu} = \oint I_\nu \cos{\theta} \mathrm{d}\omega  \tag{5.4}&lt;/script&gt;

&lt;p&gt;显然当辐射场各向同性的时候，流量为零（进出一样）；所以也可以说流量是衡量辐射场非各向同性程度的一个量。&lt;/p&gt;

&lt;p&gt;假设我们讨论的点在恒星的表面上，将流量的辐射强度积分拆成两个半球，一个在恒星内部，一个在外部，我们可以得到&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} F_\nu &amp; = \int_0^{2\pi}\mathrm{d}\phi\int_0^\pi I_\nu\sin{\theta}\cos{\theta}\mathrm{d}\theta \\ &amp; = \int_0^{2\pi}\mathrm{d}\phi (\int_0^\frac{2}{\pi} I_\nu\sin{\theta}\cos{\theta}\mathrm{d}\theta + \int_\frac{2}{\pi}^\pi I_\nu\sin{\theta}\cos{\theta}\mathrm{d}\theta) \\ &amp; = F_\nu^\mathrm{out} + F_\nu^\mathrm{in} \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;实际上就是向里的和向外的之和。对于恒星来说，一般是没有向内的辐射的；同时如果在&lt;script type=&quot;math/tex&quot;&gt;\phi&lt;/script&gt;方向各向同性的话，上式可以简化为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu  = 2\pi\int_0^\frac{2}{\pi} I_\nu\sin{\theta}\cos{\theta}\mathrm{d}\theta  \tag{5.6}&lt;/script&gt;

&lt;p&gt;再简化一下，如果向外的辐射在各个&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;方向都相等的话，那么&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_\nu = \pi I_\nu  \tag{5.7}&lt;/script&gt;

&lt;p&gt;对恒星来说这样的简化是可以接受的。&lt;/p&gt;

&lt;p&gt;辐射强度是一个辐射场的内禀量，所以不应该随着距离而变化；而流量遵循平方反比律。这里的不同之处在于辐射强度的定义式中有一个&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}\omega&lt;/script&gt;，但流量里面没有。这也说明了只有当我们明确知道观测的源的&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}\omega&lt;/script&gt;有多大，也就是能分辨清楚源面的时候，我们才能测量辐射强度；否则我们测量的只能是流量。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP5/if.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图中左侧是天空中的一个均匀的延展源，右侧是它的像。假设我们现在讨论通过中间透镜的辐射强度和流量，而&lt;script type=&quot;math/tex&quot;&gt;A_S&lt;/script&gt;所张的立体角刚好可以看作一个面元。这那么根据定义，包含在&lt;script type=&quot;math/tex&quot;&gt;A_S&lt;/script&gt;这个圆锥中的能量就是在透镜这一点上、&lt;script type=&quot;math/tex&quot;&gt;A_S&lt;/script&gt;方向的辐射强度。如果我们改变这个源的距离，因为这个圆锥（立体角大小）不变，虽然源距离我们远了，每个点发出的光少了，但是有更多的面积进入了&lt;script type=&quot;math/tex&quot;&gt;A_S&lt;/script&gt;中，所以接收到的能量是不变的。当整个源的面积小于等于&lt;script type=&quot;math/tex&quot;&gt;A_S&lt;/script&gt;的时候，我们就不能分辨源的面了，所以此时测量到的就变成了流量，遵循平方反比定律。&lt;/p&gt;

&lt;h3 id=&quot;k积分&quot;&gt;K积分&lt;/h3&gt;

&lt;p&gt;到现在为止我们从辐射强度中引出了两个值，平均辐射强度和流量：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} J_\nu &amp; = \frac{1}{4\pi} \oint I_\nu \mathrm{d}\omega \\ F_\nu &amp; = \oint I_\nu \cos{\theta} \mathrm{d}\omega \end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;如果在积分号里面再加一个&lt;script type=&quot;math/tex&quot;&gt;\cos{\theta}&lt;/script&gt;，也可以定义出一个有物理意义的量：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;K_\nu = \frac{1}{4\pi} \oint I_\nu \cos^2{\theta} \mathrm{d}\omega  \tag{5.8}&lt;/script&gt;

&lt;p&gt;它跟辐射压有关。&lt;/p&gt;

&lt;p&gt;光子的动量为&lt;script type=&quot;math/tex&quot;&gt;P = \frac{E}{c}&lt;/script&gt;，则单位时间单位面积内穿过某个面的总动量就是辐射压：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathrm{d}P_\nu = \frac{\mathrm{d}E_\nu}{c} \frac{\cos{\theta}}{\mathrm{d}t\mathrm{d}A}&lt;/script&gt;

&lt;p&gt;用辐射强度代入，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathrm{d}P_\nu = \frac{I_\nu}{c} \cos^2{\theta} \mathrm{d}\nu\mathrm{d}\omega&lt;/script&gt;

&lt;p&gt;对立体角和频率积分一下，就有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_R = \frac{1}{c} \int_0^\infty\oint I_\nu \cos^2{\theta} \mathrm{d}\omega\mathrm{d}\nu = \frac{4\pi}{c} \int_0^\infty K_\nu \mathrm{d}\nu  \tag{5.9}&lt;/script&gt;

&lt;p&gt;如果各向同性的话，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_R = \frac{4\pi}{3c} \int_0^\infty I_\nu \mathrm{d}\nu \tag{5.10}&lt;/script&gt;

&lt;p&gt;而第六章会讨论温度的一个定义方式：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\pi\int_0^\infty I_\nu \mathrm{d}\nu = \sigma T^4&lt;/script&gt;

&lt;p&gt;故有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_R = \frac{4\sigma}{3c}T^4 \tag{5.11}&lt;/script&gt;

&lt;p&gt;所以高温恒星的辐射压是很强的；同时太阳等低温恒星辐射压可以被忽略。&lt;/p&gt;

&lt;h3 id=&quot;辐射能量密度&quot;&gt;辐射能量密度&lt;/h3&gt;

&lt;p&gt;在继续之前我们稍微再从不同的角度理解一下辐射强度。辐射强度可以被理解为单位时间单位频率内往某个方向的能量对某个面元的平均，也就是这个“摆正了的”面元单位时间单位频率内的单位面积上有多少正前方的能量穿过。所以辐射强度某种程度上来说是辐射能量面密度。&lt;/p&gt;

&lt;p&gt;那么有了面密度，能不能有体密度呢？当然是可以的，我们仿照辐射强度把&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}A&lt;/script&gt;写成&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}V&lt;/script&gt;就行了（记得带上&lt;script type=&quot;math/tex&quot;&gt;\cos{\theta}&lt;/script&gt;）。但是注意到我们在讨论光，光肯定以光速运动，所以面元在空间中相对光扫过的体积和面积的关系为&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}V = c\mathrm{d}A&lt;/script&gt;，也就是说&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;u_\nu = \frac{I_\nu}{c}&lt;/script&gt;

&lt;p&gt;体积的数值肯定比面积大，所以同样的光分摊到了一个更大的数字上，密度就小了。&lt;/p&gt;

&lt;h3 id=&quot;吸收系数和光深&quot;&gt;吸收系数和光深&lt;/h3&gt;

&lt;p&gt;光穿过介质时候的衰减遵循以下规律：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathrm{d}I_\nu = -\kappa_\nu\rho I_\nu \mathrm{d}x \tag{5.12}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;\rho&lt;/script&gt;是单位体积的质量密度，&lt;script type=&quot;math/tex&quot;&gt;\mathrm{d}x&lt;/script&gt;是长度，所以&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;是单位质量上的面积(&lt;script type=&quot;math/tex&quot;&gt;\mathrm{\frac{cm^2}{g}}&lt;/script&gt;)，也就是吸收截面。&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;反映的是物质本身的性质；实际上这个值有两个方面，一个是真正的吸收，另一个是物质对光的散射。所以这个吸收系数实际上是消光系数。&lt;/p&gt;

&lt;p&gt;在没有介质发射的情况下我们可以装作化简地把式子写得简单一点，利用&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} \tau_\nu &amp; = \int_0^L \kappa_\nu \rho \mathrm{d}x \Rightarrow \\ \mathrm{d}I_\nu &amp; = -I_\nu\mathrm{d}\tau_\nu \Rightarrow \\ I_\nu &amp; = I_\nu^0 \exp{-\tau_\nu} \end{align} \tag{5.13} %]]&gt;&lt;/script&gt;

&lt;p&gt;这是最简单的消光规律。&lt;/p&gt;

&lt;h3 id=&quot;发射系数和源函数&quot;&gt;发射系数和源函数&lt;/h3&gt;

&lt;p&gt;对发射系数的定义和吸收系数非常类似，只是没有了负号：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathrm{d}I_\nu = j_\nu \rho \mathrm{d}x \tag{5.14}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;j_\nu&lt;/script&gt;的单位是&lt;script type=&quot;math/tex&quot;&gt;\mathrm{\frac{erg}{s~rad^2~Hz~g}}&lt;/script&gt;。发射系数同样包含真正的发射和散射到我们考虑的方向上的光。&lt;/p&gt;

&lt;p&gt;如果我们把发射系数和吸收系数相除，我们会发现这个商的单位和辐射强度是一样的；所以我们可以把这个商当作一个新的“辐射强度”，并定义为源函数：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;S_\nu = \frac{j_\nu}{\kappa_\nu} \tag{5.15}&lt;/script&gt;

&lt;p&gt;源函数的表征了光线在穿过介质的时候被介质替换掉的比例。它在之后的辐射转移中很有用。但是源函数的计算是比较复杂的，这里只考虑两个最极端的例子，纯各向同性散射以及纯吸收。&lt;/p&gt;

&lt;h5 id=&quot;纯各向同性散射&quot;&gt;纯各向同性散射&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP5/pis.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如上图，介质中的粒子在接收到来自某个方向的光(&lt;script type=&quot;math/tex&quot;&gt;I_\nu \mathrm{d}\omega&lt;/script&gt;)之后会将其中一部分(&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;)散射掉，而且是均匀地散射到&lt;script type=&quot;math/tex&quot;&gt;4\pi&lt;/script&gt;立体角中。所以对于某个方向上单位立体角的观测者来说只能接收到&lt;script type=&quot;math/tex&quot;&gt;1/4\pi&lt;/script&gt;的光，即&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\mathrm{d}j_\nu = \frac{1}{4\pi}\kappa_\nu I_\nu \mathrm{d}\omega&lt;/script&gt;

&lt;p&gt;对不同方向求积分，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;j_\nu = \frac{1}{4\pi} \oint\kappa_\nu I_\nu \mathrm{d}\omega&lt;/script&gt;

&lt;p&gt;一般来说&lt;script type=&quot;math/tex&quot;&gt;\kappa_\nu&lt;/script&gt;和方向没有关系，所以&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;S_\nu = \frac{j_\nu}{\kappa_\nu} = \frac{1}{4\pi} \oint I_\nu \mathrm{d}\omega = J_\nu&lt;/script&gt;

&lt;p&gt;此时粒子“发射”的辐射强度是入射光的平均辐射强度，源函数只取决于辐射场，和粒子本身无关。&lt;/p&gt;

&lt;h5 id=&quot;纯吸收&quot;&gt;纯吸收&lt;/h5&gt;

&lt;p&gt;纯吸收并不意味着粒子就不发光了；只不过之前的散射是只改变光的方向，现在粒子吸收全部的光然后再发出自己的光。一般来说我们讨论粒子到达了热动平衡之后的状态，那么此时的源函数就是黑体辐射函数&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;S_\nu = B_\nu = \frac{2h\nu^3}{c^2} \frac{1}{e^{h\nu/kT}-1} \tag{5.16}&lt;/script&gt;

&lt;p&gt;此时粒子作为&lt;strong&gt;黑体&lt;/strong&gt;发光。&lt;/p&gt;

&lt;h3 id=&quot;爱因斯坦系数&quot;&gt;爱因斯坦系数&lt;/h3&gt;

&lt;p&gt;我们将自发辐射归入辐射，受激辐射（负吸收）和受激吸收归到吸收里面，并分别用&lt;script type=&quot;math/tex&quot;&gt;A, B&lt;/script&gt;表示它们的爱因斯坦系数，&lt;script type=&quot;math/tex&quot;&gt;l, u&lt;/script&gt;表示低、高能级，则有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align} j_\nu\rho &amp; = N_uA_{ul}h\nu \\ \kappa_\nu\rho I_\nu &amp; = N_l B_{lu}I_\nu h\nu - N_uB_{ul}I_\nu h\nu \end{align} \tag{5.17} %]]&gt;&lt;/script&gt;
</description>
        <pubDate>Mon, 18 Dec 2017 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2017/12/18/OASP5/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/12/18/OASP5/</guid>
        
        <category>learning</category>
        
        
      </item>
    
      <item>
        <title>OASP笔记 - 4</title>
        <description>&lt;p&gt;这一章讲的是有关光电探测器的东西。从观测的角度来说，知道光电探测器的一些参数是很有必要的，比如说在仪器选择和之后的数据处理上。光电探测器分为两大类，积分的（常见的硅CCD）和脉冲计数的（光电倍增管）。积分类型的适合获取高信噪比图像，脉冲计数的信噪比稍低一点。当然除了探测器本身之外，我们还需要有很多其他的电子器件，来控制开关、记录时间、进行模数转换等。&lt;/p&gt;

&lt;h3 id=&quot;量子效率和光谱响应&quot;&gt;量子效率和光谱响应&lt;/h3&gt;

&lt;p&gt;量子效率定义为探测到的光子数和入射的光子数的比值，即&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;q(\lambda) = \frac{\mathrm{探测到的光子数}}{\mathrm{入射的光子数}}&lt;/script&gt;

&lt;p&gt;这个量当然越大越好，因为我们不想损失任何一个光子。同时比值的分子和分母都是波长&lt;script type=&quot;math/tex&quot;&gt;\lambda&lt;/script&gt;的函数，所以量子效率作为波长的函数也可以被称为光谱响应；这个量也是越宽越好。&lt;/p&gt;

&lt;p&gt;另一种量子效率的定义方式是从能量/电荷的角度去定义。我们可以用普朗克关系将入射光子数转化成能量：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;J = N \frac{hc}{\lambda}&lt;/script&gt;

&lt;p&gt;同时将探测到的光子数转化为电荷量：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;Q = q'(\lambda)eN&lt;/script&gt;

&lt;p&gt;那么量子效率就变成了&lt;script type=&quot;math/tex&quot;&gt;J&lt;/script&gt;和&lt;script type=&quot;math/tex&quot;&gt;Q&lt;/script&gt;的比：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;r = \frac{Q}{J} = \frac{e\lambda}{hc}q'(\lambda) = 8.066\times 10^{-5}\lambda q'(\lambda)&lt;/script&gt;

&lt;p&gt;一般来说硅探测器有很高的量子效率和比较宽的光谱响应。&lt;/p&gt;

&lt;h3 id=&quot;线性响应&quot;&gt;线性响应&lt;/h3&gt;

&lt;p&gt;除了“横向”的光谱响应以外，“纵向”的线性响应也是一个重要的参数。线性响应指的是输出的电子数量和入射的光子数量成正比的区间。在线性响应区间内，不考虑其他的误差时，探测到的谱线形状是不变的。但是如果离开了线性响应区间，就会使误差增大同时要做适当的改正。线性响应的区域和探测器用到的原理以及之后对电子的处理有关。&lt;/p&gt;

&lt;h3 id=&quot;硅二极管阵具体过程&quot;&gt;硅二极管阵（具体过程）&lt;/h3&gt;

&lt;p&gt;充电之后的硅二极管阵就像一个个小电容，光子在转化成电子之后被存储在每个单元中，通过方波信号控制读取或者移动。自扫描阵列(self scanning array)是1维的阵列，但是现在用的比较多的CCD是2维的阵列。（读出方式请回忆自己的理解）电子在不同像素中移动的时候会有损失，留下来的比例比较高(0.99950-0.999999)，但是架不住CCD太大。CCD在拍摄光谱的时候会将光谱在垂直色散方向的致宽求和；至于是在读出之前求和还是读出之后求和就看天体的亮度：是太暗所以先求和减少读出误差还是太亮所以后求和防止饱和。像素合并也可以提高读出速度。&lt;/p&gt;

&lt;p&gt;信号在离开探测器之后后被各种处理，放大、数字化、积分等等。重要的是最好在离开探测器之后马上进行放大，以防止后续操作带来的误差也被放大了。最后一步的数字化要求进行模数转换(Analog-to-digital, A/D conversion)，所以转换出来的数值的单位叫做ADU(A/D Unit)。ADU和光子数之间的关系可以通过放大器和探测器的性质得出。&lt;/p&gt;

&lt;p&gt;探测器不同像素之间的不一致大概在百分之几左右，可以用平场解决。为了减少误差平场的信噪比应当比亮帧的高几倍。但是对于靠近光谱响应边缘的光来说，因为探测器开始变得透明，望远镜结构和探测器本身会带来一些额外的像，这是平场所不能解决的，但是对于可见光来说问题不大。&lt;/p&gt;

&lt;h3 id=&quot;本底和宇宙线&quot;&gt;本底和宇宙线&lt;/h3&gt;

&lt;p&gt;所有的照片都是有本底的，即使没有打开镜头盖。这些电子的产生主要是因为热运动，所以冷却是一个减少热噪声的好办法。除了冷却之外，有些探测器还需要真空，防止因为温度梯度太大导致的结霜或者结露。足够低的温度可以将热噪声降低到可被忽略的水平，但是冷却也会影响探测器的光谱响应，如当温度降低100度时，红端的响应会降到1/10。所以宽光谱响应的探测器需要把温度浮动保持在1度以下。&lt;/p&gt;

&lt;p&gt;除此之外有的探测器还有一些偶尔出现的固定图样，如果每次的图样都一致的话也可以通过偏置减掉。宇宙线也会在照片中留下亮斑；只要像素合并不是很多的话比较容易被认出来。&lt;/p&gt;

&lt;h3 id=&quot;噪声&quot;&gt;噪声&lt;/h3&gt;

&lt;p&gt;噪声主要来自三个方面：星光本身的光子噪声、天光的光子噪声和仪器噪声。第一和第二种噪声是比较稳定而且容易计算的，所以它们的和提供了理论的噪声最小值。&lt;/p&gt;

&lt;p&gt;光子噪声遵从玻色-爱因斯坦统计：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Delta N = N^{1/2}(1 + \frac{1}{e^{\frac{h\nu}{kT}}-1})&lt;/script&gt;

&lt;p&gt;当&lt;script type=&quot;math/tex&quot;&gt;h\nu \ll kT&lt;/script&gt;的时候，上式可以简化为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Delta N = N^{1/2}&lt;/script&gt;

&lt;p&gt;假设仪器噪声也符合玻色-爱因斯坦统计，我们可以得出信噪比和探测到的光子数的关系。令&lt;script type=&quot;math/tex&quot;&gt;N&lt;/script&gt;为探测到的光子总数、&lt;script type=&quot;math/tex&quot;&gt;L&lt;/script&gt;为探测到的来自天体的光子总数、&lt;script type=&quot;math/tex&quot;&gt;B&lt;/script&gt;为来自所有其他源的光子总数，则根据光子守恒以及误差传递公式，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;L = N - B&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Delta L = (\Delta N^2 + \Delta B^2)^{1/2}&lt;/script&gt;

&lt;p&gt;将简化的玻色-爱因斯坦统计公式代入，有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\Delta L = (N + B)^{1/2}&lt;/script&gt;

&lt;p&gt;此时信噪比为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;s/n = L / \Delta L = \frac{L}{(L + 2B)^{1/2}}&lt;/script&gt;

&lt;p&gt;当来自其他源的光子数很小，即&lt;script type=&quot;math/tex&quot;&gt;B \ll L&lt;/script&gt;时，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;s/n \approx L^{1/2}&lt;/script&gt;

&lt;p&gt;信噪比正比于根号下恒星光子数。比如&lt;script type=&quot;math/tex&quot;&gt;10^4&lt;/script&gt;个光子对应100的信噪比，即1%的误差。而当&lt;script type=&quot;math/tex&quot;&gt;B \gg L&lt;/script&gt;的时候，式子变为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;s/n = \frac{L}{(2B)^{1/2}}&lt;/script&gt;

&lt;p&gt;此时应尽量增大&lt;script type=&quot;math/tex&quot;&gt;L&lt;/script&gt;（增大口径、提高量子效率等），或减少&lt;script type=&quot;math/tex&quot;&gt;B&lt;/script&gt;。这个时候增大&lt;script type=&quot;math/tex&quot;&gt;L&lt;/script&gt;对信噪比的提高比&lt;script type=&quot;math/tex&quot;&gt;B \ll L&lt;/script&gt;时要快（正比）。&lt;/p&gt;

&lt;p&gt;当然在所有情况下，获得同样信噪比需要的时间是和天体的亮度有关的。&lt;/p&gt;

&lt;h3 id=&quot;探测器的选择&quot;&gt;探测器的选择&lt;/h3&gt;

&lt;p&gt;之前推出来的公式只是和探测到的光子数而不是天体入射的光子数有关，不利于实际计算，所以需要再作推广。&lt;/p&gt;

&lt;p&gt;令&lt;script type=&quot;math/tex&quot;&gt;l&lt;/script&gt;为恒星入射的光子数，则有&lt;script type=&quot;math/tex&quot;&gt;L = q(\lambda)l&lt;/script&gt;；同时假设天光的光子噪声相对仪器噪声可忽略（光谱情况下），仪器噪声为&lt;script type=&quot;math/tex&quot;&gt;r&lt;/script&gt;，则信噪比表达式为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;s/n = \frac{q(\lambda)l}{(q(\lambda)l + r^2)^{1/2}}&lt;/script&gt;

&lt;p&gt;从上式可以看出信噪比只和量子效率、入射光子数和读出噪声有关，而量子效率和读出噪声都可以测量。不同的&lt;script type=&quot;math/tex&quot;&gt;q, l, r&lt;/script&gt;值下的信噪比曲线如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-OASP4/fig4.4.png&quot; alt=&quot;&quot; /&gt;
&lt;em&gt;入射光子数和信噪比的图&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;显然当入射光子数大时，应选用量子效率高的探测器；而小时，应选用读出噪声小的。&lt;/p&gt;

&lt;h3 id=&quot;阱深和动态范围&quot;&gt;阱深和动态范围&lt;/h3&gt;

&lt;p&gt;一个像素点可以容纳的电量成为它的阱深。当势阱被填满了之后，这个像素将不能继续探测光子。所以当天体的光子噪声主导时，从理论上来说，势阱可容纳的最大光子数的平方根就是可以获得的最大信噪比。但是实际上达不到，因为逼近势阱的顶部的时候会出现其他问题；如果想提高信噪比就需要多次曝光并叠加。&lt;/p&gt;

&lt;p&gt;探测器本身的读出噪声加上可容纳的最大电量可以描述探测器的动态范围，也就是可以探测到的光子数量范围。比如读出噪声是400个电子，势阱可以容纳&lt;script type=&quot;math/tex&quot;&gt;1.2 \times 10^7&lt;/script&gt;个电子，那么动态范围为&lt;script type=&quot;math/tex&quot;&gt;\frac{1.2 \times 10^7}{400} = 3 \times 10^4&lt;/script&gt;。&lt;/p&gt;

&lt;h3 id=&quot;噪声的测量&quot;&gt;噪声的测量&lt;/h3&gt;

&lt;p&gt;作为主要对科学感兴趣的阵营，我们有的时候对总体的噪声水平感兴趣，而不是具体的噪声来源。一个简单而又直接的方法就是测拍摄多幅暗场，统计每个像素的ADU分布；分布的宽度就是噪声、平均值就是偏置。&lt;/p&gt;

&lt;p&gt;有的时候我们想知道测得的噪声ADU值对应多少光子；这时需要利用信噪比表达式将&lt;script type=&quot;math/tex&quot;&gt;s/n, L_{\mathrm{ADU}}, u_0&lt;/script&gt;（模数转换的常数，&lt;script type=&quot;math/tex&quot;&gt;\mathrm{photons/ADU}&lt;/script&gt;）&lt;script type=&quot;math/tex&quot;&gt;, r_{\mathrm{ADU}}&lt;/script&gt;联系起来：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;s/n = \frac{u_0 L_\mathrm{ADU}}{(u_0 L_\mathrm{ADU} + u_0^2 r_\mathrm{ADU}^2)^{1/2}} \\ = \frac{L_\mathrm{ADU}}{(\frac{ L_\mathrm{ADU}}{u_0} + r_\mathrm{ADU}^2)^{1/2}}&lt;/script&gt;

&lt;p&gt;利用暗场的起伏可以测出&lt;script type=&quot;math/tex&quot;&gt;r_\mathrm{ADU}&lt;/script&gt;，已知光度的灯平场以及起伏可以测出&lt;script type=&quot;math/tex&quot;&gt;s/n&lt;/script&gt;以及&lt;script type=&quot;math/tex&quot;&gt;L_\mathrm{ADU}&lt;/script&gt;，即可算出此时的&lt;script type=&quot;math/tex&quot;&gt;u_0&lt;/script&gt;，&lt;script type=&quot;math/tex&quot;&gt;u_0 r_\mathrm{ADU}&lt;/script&gt;即为噪声对应的光子数。&lt;/p&gt;

&lt;h3 id=&quot;空间分辨率&quot;&gt;空间分辨率&lt;/h3&gt;

&lt;p&gt;空间分辨率是指可以将两个源分开的最小角距离。从频域的角度理解，因为像素阵列有大小，所以傅里叶变换之后频率大于奈奎斯特频率的信号会被盖掉，丢失了高频的信号。但是探测器单独的空间分辨率并不足以描述数据的轮廓；整体的谱线轮廓会在第12章讨论。&lt;/p&gt;

&lt;h3 id=&quot;略过的内容&quot;&gt;略过的内容&lt;/h3&gt;

&lt;p&gt;光电倍增管、照相底片&lt;/p&gt;
</description>
        <pubDate>Mon, 18 Dec 2017 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/2017/12/18/OASP4/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/12/18/OASP4/</guid>
        
        <category>learning</category>
        
        
      </item>
    
  </channel>
</rss>
